<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Visions, Voices, Data (Posts about XML)</title><link>https://necromuralist.github.io/Visions-Voices-Data/</link><description></description><atom:link href="https://necromuralist.github.io/Visions-Voices-Data/categories/cat_xml.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2021 &lt;a href="mailto:necromuralist@protonmail.com"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Thu, 25 Feb 2021 01:00:56 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Extracting Data From XML</title><link>https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#orge9f0f1b"&gt;Beginning&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org19d7919"&gt;Imports&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org2a143f4"&gt;Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org27d5dac"&gt;Set Up&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org2bcc1da"&gt;The URLS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org114a0fa"&gt;The Expected&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org83c9fe9"&gt;Middle&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org81cb8f5"&gt;Sample&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org0ed930f"&gt;The Assignment&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/#org4a1a389"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orge9f0f1b" class="outline-2"&gt;
&lt;h2 id="orge9f0f1b"&gt;Beginning&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orge9f0f1b"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org19d7919" class="outline-3"&gt;
&lt;h3 id="org19d7919"&gt;Imports&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org19d7919"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org2a143f4" class="outline-4"&gt;
&lt;h4 id="org2a143f4"&gt;Python&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org2a143f4"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from xml.etree import ElementTree
import urllib
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org27d5dac" class="outline-3"&gt;
&lt;h3 id="org27d5dac"&gt;Set Up&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org27d5dac"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org2bcc1da" class="outline-4"&gt;
&lt;h4 id="org2bcc1da"&gt;The URLS&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org2bcc1da"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SAMPLE_URL = "http://py4e-data.dr-chuck.net/comments_42.xml"
ACTUAL_URL = "http://py4e-data.dr-chuck.net/comments_260444.xml"
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org114a0fa" class="outline-4"&gt;
&lt;h4 id="org114a0fa"&gt;The Expected&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org114a0fa"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SAMPLE_EXPECTED = 2553
ACTUAL_EXPECTED_LAST_TWO_DIGITS = 34
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org83c9fe9" class="outline-2"&gt;
&lt;h2 id="org83c9fe9"&gt;Middle&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org83c9fe9"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def get_counts(url: str) -&amp;gt; int:
    """Get the sum of the 'count' tags 

    Args:
     url: URL to get the XML from

    Returns:
     sum of the count tags payloads
    """
    response = urllib.request.urlopen(url)
    tree = ElementTree.fromstring(response.read())
    total = 0
    for index, count in enumerate(tree.findall(".//count")):
	total += int(count.text)

    print(f"Tags: {index + 1}")
    print(f"Sum of Counts: {total}")
    return total
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org81cb8f5" class="outline-3"&gt;
&lt;h3 id="org81cb8f5"&gt;Sample&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org81cb8f5"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;total = get_counts(SAMPLE_URL)
assert total == SAMPLE_EXPECTED
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
Tags: 50
Sum of Counts: 2553
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org0ed930f" class="outline-3"&gt;
&lt;h3 id="org0ed930f"&gt;The Assignment&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org0ed930f"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;total =get_counts(ACTUAL_URL)
assert int(str(total)[-2:]) == ACTUAL_EXPECTED_LAST_TWO_DIGITS
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
Tags: 50
Sum of Counts: 2634
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org4a1a389" class="outline-2"&gt;
&lt;h2 id="org4a1a389"&gt;End&lt;/h2&gt;
&lt;/div&gt;</description><category>data</category><category>xml</category><guid>https://necromuralist.github.io/Visions-Voices-Data/posts/web-scraping/extracting-data-from-xml/</guid><pubDate>Sat, 03 Aug 2019 23:24:05 GMT</pubDate></item></channel></rss>