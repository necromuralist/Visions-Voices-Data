<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Visions, Voices, Data (Posts about networkx)</title><link>https://necromuralist.github.io/Visions-Voices-Data/</link><description></description><atom:link href="https://necromuralist.github.io/Visions-Voices-Data/categories/networkx.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2020 &lt;a href="mailto:necromuralist@protonmail.com"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Tue, 18 Aug 2020 07:01:45 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Some Networkx Examples</title><link>https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#orge8076e6"&gt;The Departure&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#orgb12e8b5"&gt;Imports&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#orgd343402"&gt;Set Up&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#org14412ae"&gt;The Initiation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#orgea6661f"&gt;Different Ways to Create Network Graphs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#orgb056971"&gt;A Chess Example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/#org0607d59"&gt;The Return&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orge8076e6" class="outline-2"&gt;
&lt;h2 id="orge8076e6"&gt;The Departure&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orge8076e6"&gt;
&lt;p&gt;
This is a look at different ways of creating and manipulating graphs using &lt;a href="https://networkx.github.io"&gt;NetworkX&lt;/a&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb12e8b5" class="outline-3"&gt;
&lt;h3 id="orgb12e8b5"&gt;Imports&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb12e8b5"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga4771dc" class="outline-4"&gt;
&lt;h4 id="orga4771dc"&gt;Python&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orga4771dc"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from functools import partial
from pathlib import Path
import os
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org34558ee" class="outline-4"&gt;
&lt;h4 id="org34558ee"&gt;PyPi&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org34558ee"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from bokeh.models import HoverTool
import holoviews
import hvplot.pandas
import networkx
import numpy
import pandas
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgbf773fe" class="outline-4"&gt;
&lt;h4 id="orgbf773fe"&gt;My Stuff&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgbf773fe"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from graeae.visualization import EmbedHoloview
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd343402" class="outline-3"&gt;
&lt;h3 id="orgd343402"&gt;Set Up&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgd343402"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SLUG = "some-networkx-examples"
OUTPUT_PATH = Path("../../files/posts/networks/" + SLUG)
Embed = partial(EmbedHoloview, folder_path=OUTPUT_PATH)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org14412ae" class="outline-2"&gt;
&lt;h2 id="org14412ae"&gt;The Initiation&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org14412ae"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgea6661f" class="outline-3"&gt;
&lt;h3 id="orgea6661f"&gt;Different Ways to Create Network Graphs&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgea6661f"&gt;
&lt;p&gt;
&lt;b&gt;NetworkX&lt;/b&gt; has a few different ways to create graphs, some more flexible than others. This is a non-exhaustive showing of some of them.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orged0fcf5" class="outline-4"&gt;
&lt;h4 id="orged0fcf5"&gt;Adding Edges To An Existing Graph&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orged0fcf5"&gt;
&lt;p&gt;
You can create a graph using the graph constructors. This is an example of an undirected &lt;a href="https://networkx.github.io/documentation/stable/reference/classes/graph.html"&gt;Graph&lt;/a&gt;.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;graph_1 = networkx.Graph()
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G1.add_edges_from([(0, 1),
		   (0, 2),
		   (0, 3),
		   (0, 5),
		   (1, 3),
		   (1, 6),
		   (3, 4),
		   (4, 5),
		   (4, 7),
		   (5, 8),
		   (8, 9)])

networkx.draw_networkx(G1)
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="figure"&gt;
&lt;p&gt;&lt;img src="file:///tmp/graph_one.png" alt="graph_one.png"&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org97f7582" class="outline-4"&gt;
&lt;h4 id="org97f7582"&gt;Adjacency List&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org97f7582"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;with open("G_adjlist.txt") as reader:
    print(reader.read())
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G2 = networkx.read_adjlist('G_adjlist.txt', nodetype=int)
G2.edges()
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org826073d" class="outline-4"&gt;
&lt;h4 id="org826073d"&gt;Adjacency Matrix&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org826073d"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G_mat = numpy.array([[0, 1, 1, 1, 0, 1, 0, 0, 0, 0],
		     [1, 0, 0, 1, 0, 0, 1, 0, 0, 0],
		     [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
		     [1, 1, 0, 0, 1, 0, 0, 0, 0, 0],
		     [0, 0, 0, 1, 0, 1, 0, 1, 0, 0],
		     [1, 0, 0, 0, 1, 0, 0, 0, 1, 0],
		     [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
		     [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
		     [0, 0, 0, 0, 0, 1, 0, 0, 0, 1],
		     [0, 0, 0, 0, 0, 0, 0, 0, 1, 0]])
G_mat
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G3 = networkx.Graph(G_mat)
G3.edges()
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org1423c0f" class="outline-4"&gt;
&lt;h4 id="org1423c0f"&gt;Edgelist&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org1423c0f"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;with open('G_edgelist.txt') as reader:
    print(reader.read())
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G4 = networkx.read_edgelist('G_edgelist.txt', data=[('Weight', int)])

G4.edges(data=True)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgc0f8e0c" class="outline-4"&gt;
&lt;h4 id="orgc0f8e0c"&gt;Pandas DataFrame&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgc0f8e0c"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G_df = pandas.read_csv('G_edgelist.txt', delim_whitespace=True, 
		       header=None, names=['n1', 'n2', 'weight'])
G_df
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;G5 = networkx.from_pandas_dataframe(G_df, 'n1', 'n2', edge_attr='weight')
G5.edges(data=True)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb056971" class="outline-3"&gt;
&lt;h3 id="orgb056971"&gt;A Chess Example&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb056971"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;with open('chess_graph.txt') as reader:
    count = 0
    for line in reader:
	print(line.strip())
	count += 1
	if count == 5:
	    break
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chess = networkx.read_edgelist('chess_graph.txt', data=[('outcome', int), ('timestamp', float)], 
			 create_using=networkx.MultiDiGraph())
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chess.is_directed(), chess.is_multigraph()
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chess.edges(data=True)[:5]
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;games_played = chess.degree()
games_played
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;max_value = max(games_played.values())
max_key, = [i for i in games_played.keys() if games_played[i] == max_value]

print('player {}\n{} games'.format(max_key, max_value))
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;df = pd.DataFrame(chess.edges(data=True), columns=['white', 'black', 'outcome'])
df.head()
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;df['outcome'] = df['outcome'].map(lambda x: x['outcome'])
df.head()
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;won_as_white = df[df['outcome']==1].groupby('white').sum()
won_as_black = df[df['outcome']==-1].groupby('black').sum()
win_count = won_as_white.add(won_as_black, fill_value=0)
print(win_count.head())
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;win_count.nlargest(5, 'outcome')
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org0607d59" class="outline-2"&gt;
&lt;h2 id="org0607d59"&gt;The Return&lt;/h2&gt;
&lt;/div&gt;</description><category>networks</category><category>networkx</category><guid>https://necromuralist.github.io/Visions-Voices-Data/posts/networks/some-networkx-examples/</guid><pubDate>Fri, 12 Apr 2019 20:12:58 GMT</pubDate></item><item><title>Company Movie Night</title><link>https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org9f5eeba"&gt;The Departure&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org56c5ed7"&gt;Imports&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#orgf38932c"&gt;Set Up&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org398c5ee"&gt;The Plotting&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org8b0f50c"&gt;The Initiation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org129d07b"&gt;The Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org4ac009a"&gt;Plotting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#orga4f7656"&gt;Question 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#orgf72a6e1"&gt;Question 3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org6dc405d"&gt;Question 4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/#org2be8771"&gt;The Return&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org9f5eeba" class="outline-2"&gt;
&lt;h2 id="org9f5eeba"&gt;The Departure&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org9f5eeba"&gt;
&lt;p&gt;
This is a look at working with networks using &lt;a href="https://networkx.github.io"&gt;networkx&lt;/a&gt;. Our scene - eight employees are trying to choose three movies to watch for company movie nights. We have two sources of data - the &lt;i&gt;candidate movies&lt;/i&gt; and the &lt;i&gt;relationship&lt;/i&gt; between pairs of employees. The relationships are on a scale from -100 to 100, with -100 being the strongest of enemies and 100 meaning they are best of friends. Zero either means they have no relationship (don't interact) or are indifferent about the other person.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org56c5ed7" class="outline-3"&gt;
&lt;h3 id="org56c5ed7"&gt;Imports&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org56c5ed7"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org6c0b443" class="outline-4"&gt;
&lt;h4 id="org6c0b443"&gt;From Python&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org6c0b443"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from argparse import Namespace
from functools import partial
from pathlib import Path
import copy
import os
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org40c9380" class="outline-4"&gt;
&lt;h4 id="org40c9380"&gt;From PyPi&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org40c9380"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from dotenv import load_dotenv
from bokeh.models import (
    BoxSelectTool,
    Circle,
    HoverTool, 
    MultiLine,
    PanTool,
    Range1d,
    TapTool,
    WheelZoomTool,
)
from bokeh.models import Plot as BokehPlot
from bokeh.models.graphs import (from_networkx, 
				 EdgesAndLinkedNodes, 
				 NodesAndLinkedEdges)
from bokeh.palettes import RdBu, Spectral4
from bokeh.transform import linear_cmap
import holoviews
from holoviews import dim
import hvplot.pandas
import networkx
import pandas
import numpy
from networkx.algorithms import bipartite
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org22af92e" class="outline-4"&gt;
&lt;h4 id="org22af92e"&gt;My Stuff&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org22af92e"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from graeae.visualization import EmbedBokeh, EmbedHoloview
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf38932c" class="outline-3"&gt;
&lt;h3 id="orgf38932c"&gt;Set Up&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgf38932c"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org70349c8" class="outline-4"&gt;
&lt;h4 id="org70349c8"&gt;Load Dotenv&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org70349c8"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;load_dotenv(".env", override=True)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org398c5ee" class="outline-3"&gt;
&lt;h3 id="org398c5ee"&gt;The Plotting&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org398c5ee"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;SLUG = 'company-movie-night/'
OUTPUT = Path("../../files/posts/networks/" + SLUG)
Embed = partial(EmbedHoloview, folder_path=OUTPUT)
EmbedB = partial(EmbedBokeh, folder_path=OUTPUT)
holoviews.extension("bokeh")
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Plot = Namespace(
    node_size=15,
    edge_alpha=0.8,
    edge_color="#CCCCCC",
    edge_width=5,
    width=800,
    height=800,
    fontsize=18,
    padding=dict(x=(-1, 1), y=(-1, 1))
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org8b0f50c" class="outline-2"&gt;
&lt;h2 id="org8b0f50c"&gt;The Initiation&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org8b0f50c"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org129d07b" class="outline-3"&gt;
&lt;h3 id="org129d07b"&gt;The Data&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org129d07b"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgde09087" class="outline-4"&gt;
&lt;h4 id="orgde09087"&gt;This Is the Set Of Employee-Relationships&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgde09087"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;employee_relationships_path = Path(os.environ.get("EMPLOYEE_RELATIONSHIPS"))
relationships_data = pandas.read_csv(
    employee_relationships_path, 
    delimiter="\t", 
    header=None,
    names="employee_1 employee_2 relationship".split())
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;table = holoviews.Table(relationships_data).opts(height=Plot.height)
Embed(plot=table, file_name="relationships_data")()
&lt;/pre&gt;&lt;/div&gt;

&lt;object type="text/html" data="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/relationships_data.html" style="width:100%" height="800"&gt;
  &lt;p&gt;Figure Missing&lt;/p&gt;
&lt;/object&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;employees = set(relationships_data.employee_1.unique()) | set(relationships_data.employee_2.unique())
print(employees)
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
{'Pablo', 'Georgia', 'Andy', 'Claude', 'Vincent', 'Joan', 'Lee', 'Frida'}
&lt;/pre&gt;



&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;print(len(employees))
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
8
&lt;/pre&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;print(len(relationships_data))
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
28
&lt;/pre&gt;


&lt;p&gt;
We have eight employees and twenty-eight links. Is this a fully connected graph? The handshake problem says that the amount of links in a fully-connected network is:
&lt;/p&gt;

&lt;p&gt;
\[
 links = \frac{n(n-1)}{2}
\]
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;print(len(employees) * (len(employees) - 1)/2)
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
28.0
&lt;/pre&gt;


&lt;p&gt;
It looks like our relationships data creates a fully-connected network (unless there is a duplicate which would be an error).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org3937367" class="outline-4"&gt;
&lt;h4 id="org3937367"&gt;These Are the Movie Choices&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org3937367"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;employee_movies_path = Path(os.environ.get("EMPLOYEE_MOVIE_CHOICES"))
movies_data = pandas.read_csv(
    employee_movies_path, 
    delimiter="\t", 
    header=None,
    skiprows=1,
    names="employee movie".split())
print(f"Employee To Movie Edges: {len(movies_data)}")
print(movies_data.head())
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
Employee To Movie Edges: 24
  employee                            movie
0     Andy                         Anaconda
1     Andy                       Mean Girls
2     Andy                       The Matrix
3   Claude                         Anaconda
4   Claude  Monty Python and the Holy Grail
&lt;/pre&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;movies = set(movies_data.movie.unique())
for movie in sorted(movies):
    print(f" - {movie}")
&lt;/pre&gt;&lt;/div&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;Anaconda&lt;/li&gt;
&lt;li&gt;Forrest Gump&lt;/li&gt;
&lt;li&gt;Kung Fu Panda&lt;/li&gt;
&lt;li&gt;Mean Girls&lt;/li&gt;
&lt;li&gt;Monty Python and the Holy Grail&lt;/li&gt;
&lt;li&gt;Snakes on a Plane&lt;/li&gt;
&lt;li&gt;The Dark Knight&lt;/li&gt;
&lt;li&gt;The Godfather&lt;/li&gt;
&lt;li&gt;The Matrix&lt;/li&gt;
&lt;li&gt;The Shawshank Redemption&lt;/li&gt;
&lt;li&gt;The Social Network&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
The eight employees chose 11 movies between them.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgdb6c50b" class="outline-4"&gt;
&lt;h4 id="orgdb6c50b"&gt;Converting the DataFrames to Graphs&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgdb6c50b"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3511632" class="outline-5"&gt;
&lt;h5 id="org3511632"&gt;The Relationship Graph&lt;/h5&gt;
&lt;div class="outline-text-5" id="text-org3511632"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;relationship_graph = networkx.from_pandas_edgelist(relationships_data, 
						   "employee_1", "employee_2", 
						   edge_attr="relationship")
for index, row in relationships_data.sample(5).iterrows():
    assert relationship_graph[row["employee_1"]][row["employee_2"]]["relationship"] == row["relationship"]
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;expected_edges = len(relationships_data)
expected_nodes = len(employees)
print("Expected Edges: {}".format(expected_edges))
print("Expected Nodes: {}".format(expected_nodes))
assert expected_nodes == len(relationship_graph.nodes)
assert expected_edges == len(relationship_graph.edges)
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
Expected Edges: 28
Expected Nodes: 8
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-orgf1d6e67" class="outline-5"&gt;
&lt;h5 id="orgf1d6e67"&gt;The Movie Graph&lt;/h5&gt;
&lt;div class="outline-text-5" id="text-orgf1d6e67"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;movie_graph = networkx.from_pandas_edgelist(movies_data, "employee", "movie")
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;for index, row in movies_data.iterrows():
    movie_graph[row.employee][row.movie]["employee"] = row.employee
    movie_graph[row.employee][row.movie]["movie"] = row.movie

for employee in movies_data.employee:    
    movie_graph.nodes[employee]["type"] = "employee"
for movie in movies_data.movie:
    movie_graph.nodes[movie]["type"] = "movie"
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org4ac009a" class="outline-3"&gt;
&lt;h3 id="org4ac009a"&gt;Plotting&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org4ac009a"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def graph_plot(graph: networkx.Graph, 
	       title:str,
	       file_name: str,
	       hover: HoverTool,
	       layout=networkx.circular_layout) -&amp;gt; None:
    """Plot the graph in bokeh

    Args:
     graph: the graph to plot
     layout: function to layout the plot
     title: title for the plot
     hover: defined hover tool
     file_name: name to save the bokeh file (without extension)
    """
    plot = BokehPlot(plot_width=Plot.width,
		     plot_height=Plot.height,
		     x_range=Range1d(-1, 1),
		     y_range=Range1d(-1, 1)
    )

    plot.title.text = title
    plot.title.text_font_size = f"{Plot.fontsize}pt"
    plot.add_tools(hover, TapTool(), BoxSelectTool(), PanTool(), WheelZoomTool())

    renderer = from_networkx(relationship_graph, layout, 
			     scale=1, center=(0,0))
    renderer.node_renderer.glyph = Circle(size=Plot.node_size, 
					  fill_color=Spectral4[0])
    renderer.node_renderer.selection_glyph = Circle(size=Plot.node_size, 
						    fill_color=Spectral4[2])
    renderer.node_renderer.hover_glyph = Circle(size=Plot.node_size, 
						fill_color=Spectral4[1])

    color_map = linear_cmap(field_name="relationship", 
			    palette=RdBu[11], 
			    low=100, high=-100)
    renderer.edge_renderer.glyph = MultiLine(line_color=color_map, 
					     line_alpha=0.5,
					     line_width=3)
    renderer.edge_renderer.selection_glyph = MultiLine(line_color=color_map, 
						       line_width=Plot.edge_width)
    renderer.edge_renderer.hover_glyph = MultiLine(line_color=color_map, 
						   line_width=Plot.edge_width)
    renderer.selection_policy = NodesAndLinkedEdges()
    renderer.inspection_policy = EdgesAndLinkedNodes()
    plot.renderers.append(renderer)
    EmbedB(plot=plot, file_name=file_name)()
    return
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;class RelationshipGraphPlot:
    """Plots a graph and keeps the parts so you can inspect them

    Args:
     graph: the graph to plot
     layout: function to layout the plot
     title: title for the plot
     hover: defined hover tool
     settings: namespace with the plot settings
     file_name: name to save the bokeh file (without extension)
    """
    def __init__(self, graph: networkx.Graph, 
		 title:str,
		 file_name: str,
		 hover: HoverTool,
		 settings: Namespace=Plot,
		 layout=networkx.circular_layout) -&amp;gt; None:
	self.graph = graph
	self.title = title
	self.file_name = file_name
	self.hover = hover
	self.settings = settings
	self.layout = layout
	self._tap_tool = None
	self._box_select_tool = None
	self._pan_tool = None
	self._wheel_zoom_tool = None
	self._plot = None
	self._renderer = None
	self._color_map = None
	return

    @property
    def tap_tool(self) -&amp;gt; TapTool:
	if self._tap_tool is None:
	    self._tap_tool = TapTool()
	return self._tap_tool

    @property
    def box_select_tool(self) -&amp;gt; BoxSelectTool:
	if self._box_select_tool is None:
	    self._box_select_tool = BoxSelectTool()
	return self._box_select_tool

    @property
    def pan_tool(self) -&amp;gt; PanTool:
	if self._pan_tool is None:
	    self._pan_tool = PanTool()
	return self._pan_tool

    @property
    def wheel_zoom_tool(self) -&amp;gt; WheelZoomTool:
	if self._wheel_zoom_tool is None:
	    self._wheel_zoom_tool = WheelZoomTool()
	return self._wheel_zoom_tool

    @property
    def plot(self) -&amp;gt; BokehPlot:
	if self._plot is None:
	    self._plot = BokehPlot(plot_width=self.settings.width,
				   plot_height=self.settings.height,
				   x_range=Range1d(-1, 1),
				   y_range=Range1d(-1, 1)
	    )

	    self._plot.title.text = self.title
	    self._plot.title.text_font_size = f"{Plot.fontsize}pt"
	    self._plot.add_tools(self.hover, 
				 self.tap_tool, 
				 self.box_select_tool, 
				 self.pan_tool,
				 self.wheel_zoom_tool)
	    self._plot.renderers.append(self.renderer)
	return self._plot

    @property
    def color_map(self):
	if self._color_map is None:
	    self._color_map = linear_cmap(field_name="relationship", 
					  palette=RdBu[11], 
					  low=100, high=-100)
	return self._color_map

    @property
    def renderer(self):
	if self._renderer is None:
	    self._renderer = from_networkx(self.graph, self.layout, 
					  scale=1, center=(0,0))
	    self._renderer.node_renderer.glyph = Circle(
		size=Plot.node_size, 
		fill_color=Spectral4[0])
	    self._renderer.node_renderer.selection_glyph = Circle(
		size=Plot.node_size, 
		fill_color=Spectral4[2])
	    self._renderer.node_renderer.hover_glyph = Circle(
		size=Plot.node_size, 
		fill_color=Spectral4[1])

	    self._renderer.edge_renderer.glyph = MultiLine(
		line_color=self.color_map, 
		line_alpha=0.5,
		line_width=3)
	    self._renderer.edge_renderer.selection_glyph = MultiLine(
		line_color=self.color_map, 
		line_width=Plot.edge_width)
	    self._renderer.edge_renderer.hover_glyph = MultiLine(
		line_color=self._color_map,
		line_width=Plot.edge_width)
	    self._renderer.selection_policy = NodesAndLinkedEdges()
	    self._renderer.inspection_policy = EdgesAndLinkedNodes()
	return self._renderer

    def __call__(self) -&amp;gt; None:
	EmbedB(plot=self.plot, file_name=self.file_name)()
	return
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga2df6f1" class="outline-4"&gt;
&lt;h4 id="orga2df6f1"&gt;The Employee Relationship Plot&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orga2df6f1"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf8ecef2" class="outline-5"&gt;
&lt;h5 id="orgf8ecef2"&gt;HoloViews&lt;/h5&gt;
&lt;div class="outline-text-5" id="text-orgf8ecef2"&gt;
&lt;p&gt;
The employee relationship graph consists of employees as nodes and their relationshp-level as weights on the edges.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;plot = holoviews.Graph.from_networkx(relationship_graph,
				     networkx.circular_layout).opts(
					 cmap="Set1",
					 fontsize=Plot.fontsize,
					 width=800,
					 height=800,
					 title="Company Relationship Graph",
					 xaxis=None, yaxis=None).options(
					     edge_color_index="relationship", 
					     edge_cmap="Spectral").redim.range(**Plot.padding)
renderer = holoviews.render(plot)
renderer.renderers[-1].selection_policy = EdgesAndLinkedNodes()
EmbedB(plot=renderer, file_name="employee_relationships")()
&lt;/pre&gt;&lt;/div&gt;

&lt;script src="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/employee_relationships" id="620da89f-412b-4c15-b555-58f0dd1c4fd8"&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org0b2765e" class="outline-5"&gt;
&lt;h5 id="org0b2765e"&gt;Bokeh&lt;/h5&gt;
&lt;div class="outline-text-5" id="text-org0b2765e"&gt;
&lt;p&gt;
This is the same plot using &lt;a href="https://bokeh.pydata.org/en/latest/"&gt;bokeh&lt;/a&gt; directly instead of holoviews. I wanted both the nodes and edges to trigger the &lt;code&gt;HoverTool&lt;/code&gt; but HoloViews doesn't support this. There might be a way to add it later, but their documentation is so opaque that I decided it wasn't worth it to keep trying to figure it out, since bokeh isn't that hard to use (although their documentation isn't the best either).
&lt;/p&gt;

&lt;p&gt;
Since bokeh is so verbose I'm going to step through this instead of putting it into one block.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-orge7c65eb" class="outline-6"&gt;
&lt;h6 id="orge7c65eb"&gt;Hover Tool&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-orge7c65eb"&gt;
&lt;p&gt;
When the &lt;code&gt;EdgesAndLinkedNodes&lt;/code&gt; class is used only the edge data is available to the hovertool (or at least I couldn't figure out how to make the Node attributes work). So these have to be available to it. You can see what's available once you've created the graph renderer (the output of &lt;code&gt;from_networkx&lt;/code&gt;) by looking at one of the data attributes 
&lt;/p&gt;

&lt;pre class="example"&gt;
renderer.edge_renderer.data_source.data.keys()
&lt;/pre&gt;

&lt;p&gt;
Which in this case returned this.
&lt;/p&gt;

&lt;pre class="example"&gt;
dict_keys(['relationship', 'start', 'end'])
&lt;/pre&gt;

&lt;p&gt;
&lt;code&gt;relationship&lt;/code&gt; was a data-attribute I added through &lt;code&gt;networkx&lt;/code&gt;, something else (presumably bokeh) created the start and end.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hover = HoverTool(
    tooltips=[
	("Employee", "@start"),
	("Employee", "@end"),
	("Relationship", "@relationship"),
    ]
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5c96508" class="outline-6"&gt;
&lt;h6 id="org5c96508"&gt;The Plot&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-org5c96508"&gt;
&lt;p&gt;
This is the bokeh plot (I don't know how it differs from a figure). It's normally called &lt;code&gt;Plot&lt;/code&gt; but I already used that name for my settings object so I called it &lt;code&gt;BokehPlot&lt;/code&gt;.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;plot = BokehPlot(plot_width=Plot.width,
		 plot_height=Plot.height,
		 x_range=Range1d(-1, 1),
		 y_range=Range1d(-1, 1)
)

plot.title.text = "Company Relationships"
plot.title.text_font_size = f"{Plot.fontsize}pt"
plot.add_tools(hover, TapTool(), BoxSelectTool(), PanTool(), WheelZoomTool())
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org72c7c3c" class="outline-6"&gt;
&lt;h6 id="org72c7c3c"&gt;The Graph Renderer&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-org72c7c3c"&gt;
&lt;p&gt;
This part converts the networkx Graph into a bokeh Graph. This is what I was referring to earlier when I talked about inspecting the &lt;code&gt;renderer&lt;/code&gt; to look at the available edge attributes.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;renderer = from_networkx(relationship_graph, networkx.circular_layout, 
			 scale=1, center=(0,0))
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org95fdd57" class="outline-6"&gt;
&lt;h6 id="org95fdd57"&gt;Nodes&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-org95fdd57"&gt;
&lt;p&gt;
You have to set up the shapes for the nodes - I think - there might be defaults but the few examples I found set it up. It's probably not a bad idea in any case. The &lt;code&gt;Spectral4&lt;/code&gt; object is a list of four hex-colors. Here's the ones I used.
&lt;/p&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-right"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;Object&lt;/th&gt;
&lt;th scope="col" class="org-right"&gt;Index&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;Color&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;glyph&lt;/td&gt;
&lt;td class="org-right"&gt;0&lt;/td&gt;
&lt;td class="org-left"&gt;Medium Blue&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;selection_glyph&lt;/td&gt;
&lt;td class="org-right"&gt;2&lt;/td&gt;
&lt;td class="org-left"&gt;Orange&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;hover_glyph&lt;/td&gt;
&lt;td class="org-right"&gt;1&lt;/td&gt;
&lt;td class="org-left"&gt;Pastel Green&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;renderer.node_renderer.glyph = Circle(size=Plot.node_size, fill_color=Spectral4[0])
renderer.node_renderer.selection_glyph = Circle(size=Plot.node_size, fill_color=Spectral4[2])
renderer.node_renderer.hover_glyph = Circle(size=Plot.node_size, fill_color=Spectral4[1])
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1b6e735" class="outline-6"&gt;
&lt;h6 id="org1b6e735"&gt;Color Map&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-org1b6e735"&gt;
&lt;p&gt;
The &lt;code&gt;linear_cmap&lt;/code&gt; maps a range of values to a palette of colors. In this case I'm mapping the relationship values to the red-blue palette (&lt;code&gt;RdBu&lt;/code&gt;). Two things to note:
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;I chose a red-blue palette with 11 values because the odd-number puts white at the center (it goes from blue to white to red)&lt;/li&gt;
&lt;li&gt;Althouh the name suggests a palette form red to blue it goes from blue to red so I had to make -100 the 'high' value so red would be a bad relationship.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;color_map = linear_cmap(field_name="relationship", palette=RdBu[11], low=100, high=-100)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgdc86c31" class="outline-6"&gt;
&lt;h6 id="orgdc86c31"&gt;The Edges&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-orgdc86c31"&gt;
&lt;p&gt;
Like the nodes you define the edges for the plot. This is where we get to use the color-map to make the edges match the relationship between the employees.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;renderer.edge_renderer.glyph = MultiLine(line_color=color_map, 
					 line_alpha=0.5,
					 line_width=3)
renderer.edge_renderer.selection_glyph = MultiLine(line_color=color_map, 
						   line_width=Plot.edge_width)
renderer.edge_renderer.hover_glyph = MultiLine(line_color=color_map, 
					       line_width=Plot.edge_width)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgddd489a" class="outline-6"&gt;
&lt;h6 id="orgddd489a"&gt;The Selection and Inspection Policies&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-orgddd489a"&gt;
&lt;p&gt;
This was the reason for doing it in bokeh in the first place. Adding these two lines makes both the edge and attached notes highlight when selected or hovered over.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;renderer.selection_policy = NodesAndLinkedEdges()
renderer.inspection_policy = EdgesAndLinkedNodes()
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgdbfe6e7" class="outline-6"&gt;
&lt;h6 id="orgdbfe6e7"&gt;Put It All Together&lt;/h6&gt;
&lt;div class="outline-text-6" id="text-orgdbfe6e7"&gt;
&lt;p&gt;
Now we just add the graph-renderer to the plot and have bokeh convert it to JavaScript and HTML.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;plot.renderers.append(renderer)
EmbedB(plot=plot, file_name="company_relationships_bokeh")()
&lt;/pre&gt;&lt;/div&gt;

&lt;script src="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/company_relationships_bokeh" id="b871a597-f39e-4ca0-9303-dffb029b90ec"&gt;&lt;/script&gt;

&lt;p&gt;
It looks like Andy might have some kind of personality problem (maybe he's the boss), while Georgia and Claude are unusually close.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgdb7b378" class="outline-5"&gt;
&lt;h5 id="orgdb7b378"&gt;Spring loaded&lt;/h5&gt;
&lt;div class="outline-text-5" id="text-orgdb7b378"&gt;
&lt;p&gt;
Bokeh raises an error if you try to re-use the hover-tool for some reason so I had to make a copy.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;hover = HoverTool(
    tooltips=[
	("Employee", "@start"),
	("Employee", "@end"),
	("Relationship", "@relationship"),
    ]
)

graph_plot(relationship_graph, 
	   "Company Relationships", 
	   "company_relationships_spring", 
	   hover,
	   networkx.spring_layout)
&lt;/pre&gt;&lt;/div&gt;

&lt;script src="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/company_relationships_spring" id="b9aee303-a400-4bef-a454-729bba29b2b5"&gt;&lt;/script&gt;

&lt;p&gt;
This didn't produce as interesting a result as I thought.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga6852dd" class="outline-4"&gt;
&lt;h4 id="orga6852dd"&gt;The Movie Plot&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orga6852dd"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;movie_hover = HoverTool(
    tooltips = [
	("Employee", "@employee"),
	("Movie", "@movie"),
    ]

)
plot = holoviews.Graph.from_networkx(movie_graph,
				     networkx.circular_layout).opts(
					 node_color=dim("type"),
					 cmap="Set1",
					 fontsize=Plot.fontsize,
					 width=Plot.width,
					 height=Plot.height,
					 tools=[movie_hover, TapTool()],
					 title="Company Movies Graph",
					 xaxis=None, yaxis=None).options(
					     inspection_policy="edges",
					     edge_cmap="Spectral").redim.range(**Plot.padding)
Embed(plot=plot, file_name="company_movies_circle")()
&lt;/pre&gt;&lt;/div&gt;

&lt;object type="text/html" data="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/company_movies_circle.html" style="width:100%" height="800"&gt;
  &lt;p&gt;Figure Missing&lt;/p&gt;
&lt;/object&gt;

&lt;p&gt;
The Blue nodes are employees and the red nodes are movies.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga4f7656" class="outline-3"&gt;
&lt;h3 id="orga4f7656"&gt;Question 2&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orga4f7656"&gt;
&lt;p&gt;
Using the graph from the previous question, add nodes attributes named `'type'` where movies have the value `'movie'` and employees have the value `'employee'` and return that graph.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;This function should return a networkx graph with node attributes `{'type': 'movie'}` or `{'type': 'employee'}`&lt;/b&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def answer_two():
    """Adds 'type' to nodes from movie-graph

    Returns:
     Graph: answer_one with 'type' attribute added (employee or movie)
    """
    graph = answer_one()
    new_graph = networkx.Graph()
    nodes = graph.nodes()
    employee_nodes = [node for node in nodes if node in employees]
    movie_nodes = [node for node in nodes if node in movies]
    new_graph.add_nodes_from(employee_nodes, bipartite=0, type='employee')
    new_graph.add_nodes_from(movie_nodes, bipartite=1, type="movie")
    new_graph.add_edges_from(graph.edges())
    return new_graph
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;two = answer_two()
two.nodes(data=True)
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;plot_graph(two)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgf72a6e1" class="outline-3"&gt;
&lt;h3 id="orgf72a6e1"&gt;Question 3&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgf72a6e1"&gt;
&lt;p&gt;
Find a weighted projection of the graph from `answer_two` which tells us how many movies different pairs of employees have in common.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;This function should return a weighted projected graph.&lt;/b&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def answer_three():
    graph = answer_two()
    assert networkx.is_bipartite(graph)
    return bipartite.weighted_projected_graph(graph, employees)
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;three = answer_three()
plot_graph(three)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org6dc405d" class="outline-3"&gt;
&lt;h3 id="org6dc405d"&gt;Question 4&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org6dc405d"&gt;
&lt;p&gt;
Suppose you'd like to find out if people that have a high relationship score also like the same types of movies.
&lt;/p&gt;

&lt;p&gt;
Find the Pearson correlation ( using `DataFrame.corr()` ) between employee relationship scores and the number of movies they have in common. If two employees have no movies in common it should be treated as a 0, not a missing value, and should be included in the correlation calculation.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;This function should return a float.&lt;/b&gt;
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def answer_four():
    """calculates the pearson correlation for data

    Returns:
     float: Pearson correlation for weight and relationship_score
    """
    three = answer_three()
    relationships = pandas.read_table(
	"Employee_Relationships.txt",
	names="employee_left employee_right relationship_score".split())
    relationships["employees"] = relationships.apply(
	lambda row: tuple(sorted((row["employee_left"],
				  row['employee_right']))), axis=1)

    weights = pandas.DataFrame(
	three.edges(data=True),
	columns="employee_left employee_right weight".split())
    weights["weight"] = weights.weight.map(lambda row: row["weight"])
    weights["employees"] = weights.apply(lambda row: tuple(sorted(
	(row["employee_left"],
	 row["employee_right"]))),
					 axis=1)

    joined = pandas.merge(relationships, weights, how="outer", 
			  on=['employees'])
    assert len(joined) == len(relationships)
    joined['weight'] = joined["weight"].fillna(0)

    data = joined[["relationship_score", "weight"]]
    correlation = data.corr()
    return correlation.relationship_score.weight
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;print(answer_four())
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org2be8771" class="outline-2"&gt;
&lt;h2 id="org2be8771"&gt;The Return&lt;/h2&gt;
&lt;/div&gt;</description><category>networks</category><category>networkx</category><guid>https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-movie-night/</guid><pubDate>Thu, 11 Apr 2019 20:04:23 GMT</pubDate></item></channel></rss>