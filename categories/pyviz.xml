<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Visions, Voices, Data (Posts about pyviz)</title><link>https://necromuralist.github.io/Visions-Voices-Data/</link><description></description><atom:link href="https://necromuralist.github.io/Visions-Voices-Data/categories/pyviz.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2019 &lt;a href="mailto:necromuralist@protonmail.com"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Thu, 14 Mar 2019 23:43:05 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Walking Through the Pyviz Workflow Example</title><link>https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/#org0730825"&gt;Beginning&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/#org27bec1d"&gt;Set Up&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/#org2248461"&gt;Middle&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/#orgda00e69"&gt;Looking at Measles&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/#org8f4ea94"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org0730825" class="outline-2"&gt;
&lt;h2 id="org0730825"&gt;Beginning&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org0730825"&gt;
&lt;p&gt;
This is a replication of (most of) the &lt;a href="http://pyviz.org/tutorial/01_Workflow_Introduction.html"&gt;pyviz workflow introduction&lt;/a&gt; to see if I can replicate it. Nothing new here.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org27bec1d" class="outline-3"&gt;
&lt;h3 id="org27bec1d"&gt;Set Up&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org27bec1d"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf5ca238" class="outline-4"&gt;
&lt;h4 id="orgf5ca238"&gt;Imports&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgf5ca238"&gt;
&lt;p&gt;
From Python.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from functools import partial
from pathlib import Path
import os
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;
From PyPi.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from dotenv import load_dotenv
from tabulate import tabulate

import holoviews
import hvplot.pandas
import numpy
import pandas
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;
My Stuff.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;from graeae.visualization import EmbedBokeh
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd323021" class="outline-4"&gt;
&lt;h4 id="orgd323021"&gt;Presets&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgd323021"&gt;
&lt;p&gt;
Load the dotenv.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;load_dotenv(".env")
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Set up the bokeh.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;OUTPUT_FOLDER = Path("../../files/posts/libraries/walking-through-the-pyviz-workflow-example/")
Embed = partial(EmbedBokeh, folder_path=OUTPUT_FOLDER)
holoviews.extension("bokeh", width=800)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Set up the table printer.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;TABLE = partial(tabulate, tablefmt="orgtbl", headers="keys", showindex=False)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org03a35ce" class="outline-4"&gt;
&lt;h4 id="org03a35ce"&gt;Load Some Data&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org03a35ce"&gt;
&lt;p&gt;
Measles and pertusis by state.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;diseases = pandas.read_csv(Path(os.environ.get("DISEASES")))
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;print(TABLE(diseases.head()))
&lt;/pre&gt;&lt;/div&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-right"&gt;

&lt;col class="org-right"&gt;

&lt;col class="org-left"&gt;

&lt;col class="org-right"&gt;

&lt;col class="org-right"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-right"&gt;Year&lt;/th&gt;
&lt;th scope="col" class="org-right"&gt;Week&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;State&lt;/th&gt;
&lt;th scope="col" class="org-right"&gt;measles&lt;/th&gt;
&lt;th scope="col" class="org-right"&gt;pertussis&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-right"&gt;1928&lt;/td&gt;
&lt;td class="org-right"&gt;1&lt;/td&gt;
&lt;td class="org-left"&gt;Alabama&lt;/td&gt;
&lt;td class="org-right"&gt;3.67&lt;/td&gt;
&lt;td class="org-right"&gt;nan&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-right"&gt;1928&lt;/td&gt;
&lt;td class="org-right"&gt;2&lt;/td&gt;
&lt;td class="org-left"&gt;Alabama&lt;/td&gt;
&lt;td class="org-right"&gt;6.25&lt;/td&gt;
&lt;td class="org-right"&gt;nan&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-right"&gt;1928&lt;/td&gt;
&lt;td class="org-right"&gt;3&lt;/td&gt;
&lt;td class="org-left"&gt;Alabama&lt;/td&gt;
&lt;td class="org-right"&gt;7.95&lt;/td&gt;
&lt;td class="org-right"&gt;nan&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-right"&gt;1928&lt;/td&gt;
&lt;td class="org-right"&gt;4&lt;/td&gt;
&lt;td class="org-left"&gt;Alabama&lt;/td&gt;
&lt;td class="org-right"&gt;12.58&lt;/td&gt;
&lt;td class="org-right"&gt;nan&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-right"&gt;1928&lt;/td&gt;
&lt;td class="org-right"&gt;5&lt;/td&gt;
&lt;td class="org-left"&gt;Alabama&lt;/td&gt;
&lt;td class="org-right"&gt;8.03&lt;/td&gt;
&lt;td class="org-right"&gt;nan&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org2248461" class="outline-2"&gt;
&lt;h2 id="org2248461"&gt;Middle&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org2248461"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgda00e69" class="outline-3"&gt;
&lt;h3 id="orgda00e69"&gt;Looking at Measles&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgda00e69"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgfe0a40d" class="outline-4"&gt;
&lt;h4 id="orgfe0a40d"&gt;By Year&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgfe0a40d"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;measles_by_year = diseases[["Year", "measles"]].groupby("Year").agg(numpy.sum)
plot = measles_by_year.hvplot(title="Measles In the U.S. by Year", xlabel="Year", ylabel="Cases")
Embed(plot, "measles_by_year")()
&lt;/pre&gt;&lt;/div&gt;

&lt;script src="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/measles_by_year.js" id="5ac4e2c4-4e3a-44cd-bfad-7c975b501463"&gt;&lt;/script&gt;

&lt;p&gt;
You can see from the plot that cases of measles have dropped dramatically over the years, with a particularly sharp drop in the 1960's.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgfe43556" class="outline-4"&gt;
&lt;h4 id="orgfe43556"&gt;Vaccines Enter The Picture&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-orgfe43556"&gt;
&lt;p&gt;
According to the &lt;a href="https://www.cdc.gov/measles/about/history.html"&gt;CDC&lt;/a&gt;, the Edmonston-D vaccine was released in the United States in 1963 and the Edmonston-Enders vaccine (which is still currently in use) was released in 1968.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;first = holoviews.VLine(1963)
current = holoviews.VLine(1968)
highest = holoviews.VLine(int(measles_by_year.idxmax())).opts(color="red")
plot_2 = plot * first * current * highest
Embed(plot_2, "measles_with_landmarks")()
&lt;/pre&gt;&lt;/div&gt;

&lt;script src="https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/measles_with_landmarks.js" id="102b2a55-6138-4dd5-85d2-17454c59beb1"&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org8f4ea94" class="outline-2"&gt;
&lt;h2 id="org8f4ea94"&gt;End&lt;/h2&gt;
&lt;/div&gt;</description><category>pyviz</category><category>tutorial</category><guid>https://necromuralist.github.io/Visions-Voices-Data/posts/libraries/walking-through-the-pyviz-workflow-example/</guid><pubDate>Thu, 14 Mar 2019 19:48:04 GMT</pubDate></item></channel></rss>