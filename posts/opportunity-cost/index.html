<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Testing whether reminding college students of opportunity cost helps." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Opportunity Cost | Visions, Voices, Data</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Visions-Voices-Data/posts/opportunity-cost/" rel="canonical"><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script><!--
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"
</script>
-->
<script async src="../../javascript/p5.min.js" type="text/javascript"></script>
<meta content="Cloistered Monkey" name="author">
<link href="/posts/gender-discrimination/" rel="prev" title="Gender Discrimination Inference" type="text/html">
<link href="/posts/opportunity-cost-neglect/" rel="next" title="Opportunity Cost Neglect" type="text/html">
<meta content="Visions, Voices, Data" property="og:site_name">
<meta content="Opportunity Cost" property="og:title">
<meta content="https://necromuralist.github.io/Visions-Voices-Data/posts/opportunity-cost/" property="og:url">
<meta content="Testing whether reminding college students of opportunity cost helps." property="og:description">
<meta content="article" property="og:type">
<meta content="2020-09-26T16:07:12-07:00" property="article:published_time">
<meta content="inference" property="article:tag">
<meta content="simulation" property="article:tag">
<meta content="statistics" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="/"><span id="blog-title">Visions, Voices, Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="/archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="/categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="/rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a> <a class="dropdown-item" href="/pages/giss/giss-yearly-anomalies-by-climate-zone">GISS Anomalies</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Visions-Voices-Data/"> <input name="k8" type="hidden" value="#444444"> <input name="k9" type="hidden" value="#D51920"> <input name="kt" type="hidden" value="h"> <input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"> <input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="/posts/opportunity-cost/index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="/posts/opportunity-cost/">Opportunity Cost</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="/posts/opportunity-cost/" rel="bookmark"><time class="published dt-published" datetime="2020-09-26T16:07:12-07:00" itemprop="datePublished" title="2020-09-26 16:07">2020-09-26 16:07</time></a></p>
<p class="sourceline"><a class="sourcelink" href="/posts/opportunity-cost/index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="/posts/opportunity-cost/#orgd3dd701">Beginning</a>
<ul>
<li><a href="/posts/opportunity-cost/#orga87d4be">Imports</a></li>
<li><a href="/posts/opportunity-cost/#orgbcd59d6">Set Up</a></li>
</ul>
</li>
<li><a href="/posts/opportunity-cost/#org568ee1c">Middle</a>
<ul>
<li><a href="/posts/opportunity-cost/#org747d69d">Hypotheses</a></li>
<li><a href="/posts/opportunity-cost/#org5b6b329">The Study Data</a></li>
<li><a href="/posts/opportunity-cost/#org7bbeecb">Point Estimate of Effect</a></li>
<li><a href="/posts/opportunity-cost/#org4be2e6d">Simulating Random Chance</a></li>
</ul>
</li>
<li><a href="/posts/opportunity-cost/#org25b24b2">End</a>
<ul>
<li><a href="/posts/opportunity-cost/#org89aebac">In the Abstract</a></li>
<li><a href="/posts/opportunity-cost/#orgc0c9553">Source</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-orgd3dd701">
<h2 id="orgd3dd701">Beginning</h2>
<div class="outline-text-2" id="text-orgd3dd701">
<p>We want to answer the question of whether reminding college students that spending money now deprives them of money in the future will affect their spending behavior.</p>
</div>
<div class="outline-3" id="outline-container-orga87d4be">
<h3 id="orga87d4be">Imports</h3>
<div class="outline-text-3" id="text-orga87d4be">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">Namespace</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">equal</span><span class="p">,</span>
    <span class="n">expect</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>

<span class="kn">import</span> <span class="nn">holoviews</span>
<span class="kn">import</span> <span class="nn">hvplot.pandas</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">pandas</span>

<span class="c1"># my stuff</span>
<span class="kn">from</span> <span class="nn">graeae</span> <span class="kn">import</span> <span class="n">EmbedHoloviews</span><span class="p">,</span> <span class="n">Timer</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgbcd59d6">
<h3 id="orgbcd59d6">Set Up</h3>
<div class="outline-text-3" id="text-orgbcd59d6"></div>
<div class="outline-4" id="outline-container-orge815022">
<h4 id="orge815022">Randomness</h4>
<div class="outline-text-4" id="text-orge815022">
<div class="highlight">
<pre><span></span><span class="n">numpy_random</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org083a7f2">
<h4 id="org083a7f2">Table</h4>
<div class="outline-text-4" id="text-org083a7f2">
<div class="highlight">
<pre><span></span><span class="n">TABLE</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">tabulate</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">"orgtbl"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">"keys"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-orgdfa5b54">
<h4 id="orgdfa5b54">Timer and Plotting</h4>
<div class="outline-text-4" id="text-orgdfa5b54">
<div class="highlight">
<pre><span></span><span class="n">TIMER</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>

<span class="n">SLUG</span> <span class="o">=</span> <span class="s2">"opportunity-cost"</span>
<span class="n">Embed</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">EmbedHoloviews</span><span class="p">,</span>
                <span class="n">folder_path</span><span class="o">=</span><span class="n">f</span><span class="s2">"files/posts/{SLUG}"</span><span class="p">)</span>

<span class="n">Plot</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">990</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">780</span><span class="p">,</span>
    <span class="n">fontscale</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">tan</span><span class="o">=</span><span class="s2">"#ddb377"</span><span class="p">,</span>
    <span class="n">blue</span><span class="o">=</span><span class="s2">"#4687b7"</span><span class="p">,</span>
    <span class="n">red</span><span class="o">=</span><span class="s2">"#ce7b6d"</span><span class="p">,</span>
    <span class="n">color_cycle</span> <span class="o">=</span> <span class="n">holoviews</span><span class="o">.</span><span class="n">Cycle</span><span class="p">([</span><span class="s2">"#4687b7"</span><span class="p">,</span> <span class="s2">"#ce7b6d"</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org568ee1c">
<h2 id="org568ee1c">Middle</h2>
<div class="outline-text-2" id="text-org568ee1c"></div>
<div class="outline-3" id="outline-container-org747d69d">
<h3 id="org747d69d">Hypotheses</h3>
<div class="outline-text-3" id="text-org747d69d">
<ul class="org-ul">
<li>\(H_0:\) <b>Null Hypothesis.</b> Reminding students that they can save money for future purchases won't impact their spending decisions.</li>
<li>\(H_A:\) <b>Alternative Hypothesis.</b> Reminding students that they can save money for future purchases will reduce their spending.</li>
</ul>
<p>I'll us a 95% significance level.</p>
<div class="highlight">
<pre><span></span><span class="n">ALPHA</span> <span class="o">=</span> <span class="s2">"0.05"</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org5b6b329">
<h3 id="org5b6b329">The Study Data</h3>
<div class="outline-text-3" id="text-org5b6b329">
<p>150 Students were given the following statement:</p>
<blockquote>
<p>Imagine that you have been saving some extra money on the side to make some purchases and on your most recent visit to the video store you come across a special sale on a new video. This video is one with your favorite actor or actress, and your favorite type of movie (such as comedy, drama, thriller, etc.). This particular video that you are considering is one you have been thinking about buying for a long time. It is available for a special sale price of $14.99.</p>
<p>What would you do in this situation? Please circle one of the options below.</p>
</blockquote>
<p>Video store? Are we going to have to invent a time machine to run this study? No, we'll just swipe the data published by Frederick et al. in 2009. They conducted their study at Arizona State University, which perhaps still had some DVD stores around back then. The study was building on prior work that showed that people focus exclusively on explicitly presented details and ignore the facts that the explicit statements imply but don't state. (Also, I just looked it up and there's quite a few video stores around me (here in Portland) I guess I just haven't been to one in a while).</p>
<p>The options that the subjects were given to circle depended on which group they belonged to. The control group (75 students) were given these options:</p>
<blockquote>
<p>A. Buy this entertaining video.<br>
B. Not buy this entertaining video.</p>
</blockquote>
<p>The treatment group (also 75 students) were given these options:</p>
<blockquote>
<p>A. Buy this entertaining video.<br>
B. Not buy this entertaining video. Keep the $14.99 for other purchases.</p>
</blockquote>
<p>Here's the outcome of the study.</p>
<div class="highlight">
<pre><span></span><span class="n">Outcome</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span>
    <span class="n">buy</span><span class="o">=</span><span class="s2">"Buy DVD"</span><span class="p">,</span>
    <span class="n">dont_buy</span><span class="o">=</span><span class="s2">"Not Buy DVD"</span><span class="p">,</span>
    <span class="n">control</span><span class="o">=</span><span class="s2">"Control Group"</span><span class="p">,</span>
    <span class="n">treatment</span><span class="o">=</span><span class="s2">"Treatment Group"</span><span class="p">,</span>
    <span class="n">total</span><span class="o">=</span><span class="s2">"Total"</span>
<span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="n">Outcome</span><span class="o">.</span><span class="n">buy</span><span class="p">:[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">41</span><span class="p">],</span>
                                   <span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">:</span> <span class="p">[</span><span class="mi">19</span><span class="p">,</span> <span class="mi">34</span><span class="p">]})</span>
<span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">Outcome</span><span class="o">.</span><span class="n">treatment</span><span class="p">]</span>
<span class="n">row</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">row</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">Outcome</span><span class="o">.</span><span class="n">total</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"columns"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">TABLE</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right">
<col class="org-right"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col">Buy DVD</th>
<th class="org-right" scope="col">Not Buy DVD</th>
<th class="org-right" scope="col">Total</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Control Group</td>
<td class="org-right">56</td>
<td class="org-right">19</td>
<td class="org-right">75</td>
</tr>
<tr>
<td class="org-left">Treatment Group</td>
<td class="org-right">41</td>
<td class="org-right">34</td>
<td class="org-right">75</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Total</td>
<td class="org-right">97</td>
<td class="org-right">53</td>
<td class="org-right">150</td>
</tr>
</tbody>
</table>
<div class="highlight">
<pre><span></span><span class="n">Total</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span>
    <span class="n">buy</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">buy</span><span class="p">],</span>
    <span class="n">dont_buy</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">],</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">control</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">],</span>
    <span class="n">students</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
<p>Now a little plotting.</p>
<div class="highlight">
<pre><span></span><span class="c1"># put the groups into a column</span>
<span class="n">plotter</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># get rid of the totals</span>
<span class="k">del</span><span class="p">(</span><span class="n">plotter</span><span class="p">[</span><span class="s2">"Total"</span><span class="p">])</span>
<span class="n">plotter</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># move the outcome headers into a column</span>
<span class="n">plotter</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"index"</span><span class="p">],</span>
                       <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">buy</span><span class="p">,</span> <span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">])</span>
<span class="n">plotter</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s2">"Group"</span><span class="p">,</span>
    <span class="n">variable</span><span class="o">=</span><span class="s2">"Outcome"</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="s2">"Count"</span><span class="p">))</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">plotter</span><span class="o">.</span><span class="n">hvplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Group"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Count"</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">"Outcome"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Buy Or Don't Buy DVD"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">color_cycle</span><span class="p">,</span>
    <span class="n">fontscale</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">fontscale</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">outcome</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">"buy_dont_buy"</span><span class="p">)()</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">outcome</span><span class="p">)</span>
</pre></div>
<object data="/posts/opportunity-cost/buy_dont_buy.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>It <i>looks</i> like there was a significant difference since not only did the majority of the treatment group opt not to buy the DVD, but in the control a significant majority did.</p>
<p>Now as row-proportions.</p>
<div class="highlight">
<pre><span></span><span class="n">proportions</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"rows"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">TABLE</span><span class="p">(</span><span class="n">proportions</span><span class="p">))</span>
</pre></div>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right">
<col class="org-right"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col">Buy DVD</th>
<th class="org-right" scope="col">Not Buy DVD</th>
<th class="org-right" scope="col">Total</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Control Group</td>
<td class="org-right">0.746667</td>
<td class="org-right">0.253333</td>
<td class="org-right">1</td>
</tr>
<tr>
<td class="org-left">Treatment Group</td>
<td class="org-right">0.546667</td>
<td class="org-right">0.453333</td>
<td class="org-right">1</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Total</td>
<td class="org-right">0.646667</td>
<td class="org-right">0.353333</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table>
<p>Looking at the proportions it looks like quite a bit more didn't buy the DVD, but let's run the experiment and see.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org7bbeecb">
<h3 id="org7bbeecb">Point Estimate of Effect</h3>
<div class="outline-text-3" id="text-org7bbeecb">
<p>The thing we are interested in is whether the wording of the second option to not buy the DVD made a difference, so our statistic of interest is the difference in proportions of the control and treatment group participants who didn't buy the DVD.</p>
\begin{align} \hat{p}_{control} &amp;= \frac{\textrm{Control Group that wouldn't buy}}{\textrm{size of Control Group}}\\ \hat{p}_{treatment} &amp;= \frac{\textrm{Treatment Group that wouldn't buy}}{\textrm{size of Treament Group}}\\ \hat{p} &amp;= \hat{p}_{treatment} - \hat{p}_{control} \end{align}
<div class="highlight">
<pre><span></span><span class="n">POINT_ESTIMATE</span> <span class="o">=</span> <span class="p">(</span><span class="n">proportions</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">treatment</span><span class="p">]</span>
                  <span class="o">-</span> <span class="n">proportions</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">control</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">"{POINT_ESTIMATE * 100:.2f} %"</span><span class="p">)</span>
</pre></div>
<pre class="example">
20.00 %
</pre>
<p>About twenty percent more of the treatment group said they would abstain from the purchase than control group.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org4be2e6d">
<h3 id="org4be2e6d">Simulating Random Chance</h3>
<div class="outline-text-3" id="text-org4be2e6d">
<p>In a previous post looking at <a href="/posts/gender-discrimination/">Gender Discrimination Inference</a> I split the Urn into a 50-50 split of males and females to see if there was gender bias in choosing whether to promote them. In this case it's going to work a little differently.</p>
<p>We are asking here whether our treatment had an effect. If it didn't then we would expect that the distribution of "buy" and "don't buy" that we saw represents the distribution of the underlying population of ASU students, so we need to split our urn up to match the counts in the "Buy" and "Don't Buy" columns and then randomly split it into two equal groups. If the difference we saw was the result of random chance then we would expect that the difference between "buy" and "don't buy" group would be equal most of the time. This doesn't seem as intuitive a way to set it up as the previous method, but we'll see how it goes.</p>
</div>
<div class="outline-4" id="outline-container-org6600c6b">
<h4 id="org6600c6b">Set Up the Urn</h4>
<div class="outline-text-4" id="text-org6600c6b">
<div class="highlight">
<pre><span></span><span class="n">buy</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">buy</span><span class="p">]</span>
<span class="n">dont</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">Outcome</span><span class="o">.</span><span class="n">total</span><span class="p">][</span><span class="n">Outcome</span><span class="o">.</span><span class="n">dont_buy</span><span class="p">]</span>

<span class="n">bought</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">buy</span><span class="p">)</span>
<span class="n">didnt</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">dont</span><span class="p">)</span>

<span class="n">URN</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bought</span><span class="p">,</span> <span class="n">didnt</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">URN</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">STUDENTS</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">buy</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">97</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">dont</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">53</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">URN</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">dont</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-orgad8c65e">
<h4 id="orgad8c65e">Simulate</h4>
<div class="outline-text-4" id="text-orgad8c65e">
<p>The Process:</p>
<ol class="org-ol">
<li>Shuffle the urn</li>
<li>Split the shuffled urn in half (control and treatment)</li>
<li>Count the proportion of each half that said they would not buy the DVD</li>
<li>Record the differences between the proportions of the control that wouldn't buy and the treatment that wouldn't buy</li>
</ol>
<p>But, since I'm doing this with numpy it works a little different.</p>
<p>My process:</p>
<ol class="org-ol">
<li>Randomly choose half the urn (without replacement) to get the control group</li>
<li>Sum the choices (this gives the count of the control that said they wouldn't buy)</li>
<li>Subtract the previous sum from the total that said they wouldn't buy (to get the treatment count)</li>
<li>Calculate the proportion of each group that said they wouldn't buy</li>
<li>Find the difference in proportion for each group</li>
</ol>
<div class="highlight">
<pre><span></span><span class="n">TRIALS</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span>

<span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">controls</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">numpy_random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">URN</span><span class="p">,</span>
                                                <span class="n">Total</span><span class="o">.</span><span class="n">group</span><span class="p">,</span>
                                                <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">TRIALS</span><span class="p">)])</span>
    <span class="n">treatments</span> <span class="o">=</span> <span class="n">Total</span><span class="o">.</span><span class="n">dont_buy</span> <span class="o">-</span> <span class="n">controls</span>

    <span class="n">control_proportions</span> <span class="o">=</span> <span class="n">controls</span><span class="o">/</span><span class="n">Total</span><span class="o">.</span><span class="n">group</span>
    <span class="n">treatment_proportions</span> <span class="o">=</span> <span class="n">treatments</span><span class="o">/</span><span class="n">Total</span><span class="o">.</span><span class="n">group</span>

    <span class="n">differences</span> <span class="o">=</span> <span class="n">control_proportions</span> <span class="o">-</span> <span class="n">treatment_proportions</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
        <span class="s2">"Point Estimate"</span><span class="p">:</span> <span class="n">differences</span><span class="p">,</span>
        <span class="s2">"Control"</span><span class="p">:</span> <span class="n">control_proportions</span><span class="p">,</span>
        <span class="s2">"Treatment"</span><span class="p">:</span> <span class="n">treatment_proportions</span><span class="p">,</span>
    <span class="p">})</span>
</pre></div>
<pre class="example">
2020-09-26 20:02:52,224 graeae.timers.timer start: Started: 2020-09-26 20:02:52.224515
2020-09-26 20:03:29,174 graeae.timers.timer end: Ended: 2020-09-26 20:03:29.174373
2020-09-26 20:03:29,175 graeae.timers.timer end: Elapsed: 0:00:36.949858
</pre></div>
</div>
<div class="outline-4" id="outline-container-org79c0bef">
<h4 id="org79c0bef">Plot the Distribution</h4>
<div class="outline-text-4" id="text-org79c0bef">
<div class="highlight">
<pre><span></span><span class="n">plot</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">hvplot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s2">"Point Estimate"</span><span class="p">,</span>
                              <span class="n">bins</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Opportunity Cost Don't Buy Difference"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">Plot</span><span class="o">.</span><span class="n">tan</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">outcome</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">"opportunity_cost_simulation"</span><span class="p">)()</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">outcome</span><span class="p">)</span>
</pre></div>
<object data="/posts/opportunity-cost/opportunity_cost_simulation.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The distribution appears to be reasonably normal, if a bit peaked in the middle.</p>
<div class="highlight">
<pre><span></span><span class="n">matched</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">simulation</span><span class="p">[</span><span class="n">simulation</span><span class="p">[</span><span class="s2">"Point Estimate"</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">POINT_ESTIMATE</span><span class="p">])</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">simulation</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">"Percent of trials &gt;= Point Estimate of Study: {100 * matched:0.3f} %"</span><span class="p">)</span>
</pre></div>
<pre class="example">
Percent of trials &gt;= Point Estimate of Study: 0.817 %
</pre>
<p>According to our simulation, less than one percent of the time we would see a difference like the study found by random chance alone.</p>
</div>
</div>
<div class="outline-4" id="outline-container-orgead7e12">
<h4 id="orgead7e12">Test Our Hypothesis</h4>
<div class="outline-text-4" id="text-orgead7e12">
<div class="highlight">
<pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">"Null Hypothesis is {matched &gt;= POINT_ESTIMATE}"</span><span class="p">)</span>
</pre></div>
<pre class="example">
Null Hypothesis is False
</pre>
<p>So we'll conclude that the Null Hypothesis is false and that the Alternative Hypothesis that telling students about the opportunity cost of buying a DVD does have an effecte in getting them to not buy the DVD.</p>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org25b24b2">
<h2 id="org25b24b2">End</h2>
<div class="outline-text-2" id="text-org25b24b2">
<p>So here we have a walk through of Inference using simulation and an experiment with Control and Treatment groups. Although the conclusion reached is that reminding students of the money they would have in the future if they didn't spend it is "causal", since this was an experiment, I'm not 100% convinced that asking studnents what the</p>
</div>
<div class="outline-3" id="outline-container-org89aebac">
<h3 id="org89aebac">In the Abstract</h3>
<div class="outline-text-3" id="text-org89aebac">
<ol class="org-ol">
<li>Create an urn where the ones and zeros are equal to the totals for each of the outcome columns</li>
<li>Sample from the urn a simulated control group and treatment group (matching the sizes of the original groups)</li>
<li>Find the difference between the proportion of the control group and the treatment group that match the "success" outcome</li>
<li>Calculate the fraction of the differences that are equal to or greater than the differences in the study</li>
<li>Check if the fraction in the simulation meets your confidence level</li>
</ol>
</div>
</div>
<div class="outline-3" id="outline-container-orgc0c9553">
<h3 id="orgc0c9553">Source</h3>
<div class="outline-text-3" id="text-orgc0c9553">
<ul class="org-ul">
<li><a href="/posts/introductory-statistics-with-randomization-and-simulation/">Introductory Statistics with Randomization and Simulation</a></li>
<li><a href="/posts/opportunity-cost-neglect/">Opportunity Cost Neglect</a></li>
</ul>
</div>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="/categories/inference/" rel="tag">inference</a></li>
<li><a class="tag p-category" href="/categories/simulation/" rel="tag">simulation</a></li>
<li><a class="tag p-category" href="/categories/statistics/" rel="tag">statistics</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="/posts/gender-discrimination/" rel="prev" title="Gender Discrimination Inference">Previous post</a></li>
<li class="next"><a href="/posts/opportunity-cost-neglect/" rel="next" title="Opportunity Cost Neglect">Next post</a></li>
</ul>
</nav>
</aside>
<script crossorigin="anonymous" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">

        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
</script><!--End of body content-->
<footer id="footer">Contents © 2020 <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
<script src="../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script> </article>
</div>
</div>
</body>
</html>
