<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="A nested cursor follower." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Nested follower | Visions, Voices, Data</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Visions-Voices-Data/posts/nature-of-code/nested-follower/" rel="canonical"><!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]-->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script><!--
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"
</script>
-->
<script async src="../../../assets/javascript/p5.min.js" type="text/javascript"></script>
<meta content="Cloistered Monkey" name="author">
<link href="/posts/nature-of-code/a-mouse-follower/" rel="prev" title="A Mouse Follower" type="text/html">
<link href="/posts/web-scraping/web-scraping-assignment-2/" rel="next" title="Web Scraping Assignment 2" type="text/html">
<meta content="Visions, Voices, Data" property="og:site_name">
<meta content="Nested follower" property="og:title">
<meta content="https://necromuralist.github.io/Visions-Voices-Data/posts/nature-of-code/nested-follower/" property="og:url">
<meta content="A nested cursor follower." property="og:description">
<meta content="article" property="og:type">
<meta content="2019-07-23T13:49:03-07:00" property="article:published_time">
<meta content="p5.js" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="/"><span id="blog-title">Visions, Voices, Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="/archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="/categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="/rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a> <a class="dropdown-item" href="/pages/giss/giss-yearly-anomalies-by-climate-zone">GISS Anomalies</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Visions-Voices-Data/"> <input name="k8" type="hidden" value="#444444"> <input name="k9" type="hidden" value="#D51920"> <input name="kt" type="hidden" value="h"> <input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"> <input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="/posts/nature-of-code/nested-follower/index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="/posts/nature-of-code/nested-follower/">Nested follower</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="/posts/nature-of-code/nested-follower/" rel="bookmark"><time class="published dt-published" datetime="2019-07-23T13:49:03-07:00" itemprop="datePublished" title="2019-07-23 13:49">2019-07-23 13:49</time></a></p>
<p class="sourceline"><a class="sourcelink" href="/posts/nature-of-code/nested-follower/index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="/posts/nature-of-code/nested-follower/#orge62e867">Beginning</a>
<ul>
<li><a href="/posts/nature-of-code/nested-follower/#org7b0d2d0">Create A Walker</a></li>
<li><a href="/posts/nature-of-code/nested-follower/#org1f6be0e">Specifications</a></li>
</ul>
</li>
<li><a href="/posts/nature-of-code/nested-follower/#org574bcca">Middle</a></li>
<li><a href="/posts/nature-of-code/nested-follower/#orgc3afdaf">End</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-orge62e867">
<h2 id="orge62e867">Beginning</h2>
<div class="outline-text-2" id="text-orge62e867">
<p>This is assignment 1 from the Nature of Code course on Kadenze. I was originally going to make it a mouse-follower but I re-read the instructions and it seems like it's better to make it a random-walker. These are the requirements:</p>
</div>
<div class="outline-3" id="outline-container-org7b0d2d0">
<h3 id="org7b0d2d0">Create A Walker</h3>
<div class="outline-text-3" id="text-org7b0d2d0">
<ul class="org-ul">
<li>Create an object that moves around the screen</li>
<li>Incorporate randomness or perlin noise</li>
</ul>
</div>
</div>
<div class="outline-3" id="outline-container-org1f6be0e">
<h3 id="org1f6be0e">Specifications</h3>
<div class="outline-text-3" id="text-org1f6be0e">
<ul class="org-ul">
<li>Needs to be visually different from the Nature of Code examples</li>
<li>Use comments</li>
<li>Only use <code>p5.js</code> libraries</li>
</ul>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org574bcca">
<h2 id="org574bcca">Middle</h2>
<div class="outline-text-2" id="text-org574bcca">
<script language="javascript" src="/posts/nature-of-code/nested-follower/follower.js" type="text/javascript"></script>
<div id="nested-follower"></div>
<div class="highlight">
<pre><span></span>/**
 * Random Walker
 *
 * This is an implementation of the Random Walker based on the example given in
 * "The Nature of Code"
 */

// This is the div where the canvas will be placed
let nested_parent_div_id = "nested-follower";

/**
 * The sketch creator
 * 
 * @param {P5} p
 */
let nested_follower_sketch = function(p) {
    /**
     * Setup the canvas
     *
     * - Attaches the canvas to the div
     * - Creates the walker objects
     */
    p.setup = function() {
        this.canvas = p.createCanvas($("#" + nested_parent_div_id).outerWidth(true), 800);
        p.parent = new NoiseWalker(p);
        let followers = 10;
        p.followers = [new Follower(p, p.parent)];
        for (let step=0; step &lt; followers; step++) {
            p.followers.push(new Follower(p, p.followers[step]));
        };
    };

    /**
     * Refresh the objects by calling their update functions
     *
     * This also clears the background.
     */
    p.draw = function() {
        p.background(255, 255, 255, 50);
        p.parent.update();
        p.followers.forEach(function(follower) {
            follower.update();
        });
    };
};

/**
 * The main walker (with perlin noise)
 *
 * @param {P5} p
 */
function NoiseWalker(p) {
    // Our kinematics vectors
    this.position = p.createVector(p.width/2, p.height/2);
    this.velocity = p.createVector(0, 0);
    this.acceleration = p.createVector(0, 0);

    // Time for the perlin noise function
    this.time_x = 0;
    this.time_y = 10000;
    this.time_delta = 0.01;

    // The limit of how much we'll accelerate
    this.max_acceleration = 0.05;

    /**
     * Updates the walker's position
     */
    this.walk = function() {
        // set the acceleration using perlin noise
        this.acceleration.x = p.map(p.noise(this.time_x), 0, 1,
                                    -this.max_acceleration,
                                    this.max_acceleration);
        this.acceleration.y = p.map(p.noise(this.time_y), 0, 1,
                                    -this.max_acceleration,
                                    this.max_acceleration);
        // Move the walker
        this.velocity = this.velocity.add(this.acceleration);
        this.position = this.position.add(this.velocity);

        // keep it within the window
        if (this.position.x &lt; 0)
            this.velocity.x = p.abs(this.velocity.x);
        else if (this.position.x &gt; p.width)
            this.velocity.x = -this.velocity.x;
        if (this.position.y &lt; 0)
            this.velocity.y = p.abs(this.velocity.y);
        else if (this.position.y &gt; p.height)
            this.velocity.y = -this.velocity.y;

        // update the time
        this.time_x += this.time_delta;
        this.time_y += this.time_delta;
    };

    /**
     * draws the walker (for debugging)
     */
    this.display = function() {
        p.stroke(0);
        p.point(this.position.x, this.position.y);
    };

    /**
     * Calls the walk function
     */
    this.update = function() {
        this.walk();
    };
}


/**
 * A follower that follows a parent object
 *
 * @param {P5} p
 * @param {NoiseWalker} parent
 */
function Follower(p, parent) {
    this.parent = parent;
    this.variance = p.random(1, 10);
    this.position = p.createVector(
        this.parent.position.x + p.random(-this.variance, this.variance),
        this.parent.position.y + p.random(-this.variance, this.variance));
    this.velocity = p.createVector(0, 0);

    // some colors to cycle through
    this.max_diameter = p.round(p.random(5, 200));
    this.time_x = p.random(100);
    this.time_y = p.random(10000, 11000);
    this.time_delta = 0.005;

    /**
     * Moves the Follower
     *
     * sets the acceleration by pointing to the parent's position
     */
    this.walk = function() {
        let acceleration = p5.Vector.sub(this.parent.position, this.position);       
        this.velocity = this.velocity.add(acceleration);
        this.position = this.position.add(this.velocity);
    };

    /**
     * Display the Follower
     *
     * cycles through the colors as we go
     */
    this.display = function() {
        // set our line width
        p.strokeWeight(p.map(p.noise(this.time_x, this.time_y),
                             0, 1, this.variance, 2 * this.variance));

        // set our color
        p.stroke(63, 63, 191);        

        // don't fill the object
        p.noFill();

        // draw our object with a random diameter
        p.ellipse(this.position.x, this.position.y,
                  p.round(p.random(5, this.max_diameter)),
                  p.round(p.random(5, this.max_diameter)));

        // update the time
        this.time_x += this.time_delta;
        this.time_y += this.time_delta;

    };

    /**
     * calls the update and walk 
     */
    this.update = function() {
        this.walk();
        this.display();
    };
}

// create the p5 object and attach it to the div
new p5(nested_follower_sketch, nested_parent_div_id);
</pre></div>
<div class="outline-2" id="outline-container-orgc3afdaf">
<h2 id="orgc3afdaf">End</h2>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../../categories/p5js/" rel="tag">p5.js</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../a-mouse-follower/" rel="prev" title="A Mouse Follower">Previous post</a></li>
<li class="next"><a href="../../web-scraping/web-scraping-assignment-2/" rel="next" title="Web Scraping Assignment 2">Next post</a></li>
</ul>
</nav>
</aside>
<!--End of body content-->
<footer id="footer">Contents © 2020 <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
<script src="../../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script> </div>
</div>
</div>
</article>
</div>
</div>
</body>
</html>
