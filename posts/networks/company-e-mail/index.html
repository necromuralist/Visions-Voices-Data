<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Looking at the email of a company to find connections." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Company E-Mail | Visions, Voices, Data</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-e-mail/" rel="canonical"><!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]-->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script><!--
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"
</script>
-->
<script async src="../../../assets/javascript/p5.min.js" type="text/javascript"></script>
<meta content="Cloistered Monkey" name="author">
<link href="/posts/networks/some-networkx-examples/" rel="prev" title="Some Networkx Examples" type="text/html">
<link href="/posts/networks/friends-and-politics/" rel="next" title="Friends and Politics" type="text/html">
<meta content="Visions, Voices, Data" property="og:site_name">
<meta content="Company E-Mail" property="og:title">
<meta content="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/company-e-mail/" property="og:url">
<meta content="Looking at the email of a company to find connections." property="og:description">
<meta content="article" property="og:type">
<meta content="2019-04-13T11:34:37-07:00" property="article:published_time">
<meta content="networks" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="/"><span id="blog-title">Visions, Voices, Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="/archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="/categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="/rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Ape-Iron/">Ape Iron</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach Pig Rump & Thigh</a> <a class="dropdown-item" href="https://necromuralist.github.io/Bowling-For-Data/">Bowling For Data</a> <a class="dropdown-item" href="https://necromuralist.github.io/Give-The-Fish/">Give the Fish</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Terribilis-Ludum/">Terribilis Ludum</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Visions-Voices-Data/"> <input name="k8" type="hidden" value="#444444"> <input name="k9" type="hidden" value="#D51920"> <input name="kt" type="hidden" value="h"> <input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"> <input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="/posts/networks/company-e-mail/index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="/posts/networks/company-e-mail/">Company E-Mail</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="/posts/networks/company-e-mail/" rel="bookmark"><time class="published dt-published" datetime="2019-04-13T11:34:37-07:00" itemprop="datePublished" title="2019-04-13 11:34">2019-04-13 11:34</time></a></p>
<p class="sourceline"><a class="sourcelink" href="/posts/networks/company-e-mail/index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="/posts/networks/company-e-mail/#orgac9eeeb">Tangle</a></li>
<li><a href="/posts/networks/company-e-mail/#org9b3120d">Imports</a></li>
<li><a href="/posts/networks/company-e-mail/#org139a99e">1 - Load the Directed Multigraph</a></li>
<li><a href="/posts/networks/company-e-mail/#orgebdea36">Number of employees and emails</a></li>
<li><a href="/posts/networks/company-e-mail/#org4ce3346">Information Routes</a>
<ul>
<li><a href="/posts/networks/company-e-mail/#orgd7e3c90">Part 1. Assume that information in this company can only be exchanged through email.</a></li>
<li><a href="/posts/networks/company-e-mail/#org3fbfc07">Part 2. Now assume that a communication channel established by an email allows information to be exchanged both ways.</a></li>
</ul>
</li>
<li><a href="/posts/networks/company-e-mail/#org97990e6">Largest Weakly Connected Component</a></li>
</ul>
</div>
</div>
<p>This will go through the process of importing and analyzing an internal email communication network between employees of a mid-sized manufacturing company. Each node represents an employee and each directed edge between two nodes represents an individual email. The left node represents the sender and the right node represents the recipient.</p>
<div class="highlight">
<pre><span></span>+------+      +--------+
|Sender| --&gt;  |Receiver|
+------+      +--------+
</pre></div>
<div class="outline-2" id="outline-container-orgac9eeeb">
<h2 id="orgac9eeeb">Tangle</h2>
<div class="outline-text-2" id="text-orgac9eeeb">
<p>This is for troubleshooting.</p>
<div class="highlight">
<pre><span></span><span class="o">&lt;&lt;</span><span class="n">imports</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">data</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">answer</span><span class="o">-</span><span class="n">one</span><span class="o">&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org9b3120d">
<h2 id="org9b3120d">Imports</h2>
<div class="outline-text-2" id="text-org9b3120d">
<div class="highlight">
<pre><span></span>import networkx
import pandas
import seaborn
</pre></div>
<div class="highlight">
<pre><span></span>% matplotlib inline
seaborn.set_style("whitegrid")
</pre></div>
<p>This line must be commented out when submitting to the autograder</p>
<div class="highlight">
<pre><span></span>email_network = pandas.read_table('email_network.txt', dtype={"#Sender": str, "Recipient": str})
print(email_network.head())
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org139a99e">
<h2 id="org139a99e">1 - Load the Directed Multigraph</h2>
<div class="outline-text-2" id="text-org139a99e">
<p>Using networkx, load up the directed multigraph from `email<sub>network.txt</sub>`. Make sure the node names are strings.</p>
<p><b>This function should return a directed multigraph networkx graph.</b></p>
<div class="highlight">
<pre><span></span>def answer_one():
    """Loads the email-network graph

    Returns:
     networkx.MultiDiGraph: the graph of the email network
    """
    # there's a bug in networkx loading MultiDiGraphs from pandas data-frames
    # so this is a work-around
    graph = networkx.MultiDiGraph()
    tuples = [(sender, recipient, {"time": time})
              for (sender, recipient, time) in email_network.values]
    graph.add_edges_from(tuples)
    return graph
</pre></div>
<div class="highlight">
<pre><span></span>one = answer_one()
networkx.draw_networkx(one)
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgebdea36">
<h2 id="orgebdea36">Number of employees and emails</h2>
<div class="outline-text-2" id="text-orgebdea36">
<p>How many employees and emails are represented in the graph from Question 1?</p>
<p><b>This function should return a tuple (#employees, #emails).</b></p>
<div class="highlight">
<pre><span></span>def answer_two():
    """Counts the number of employees and emails

    Returns:
     tuple: count of employees, count of emails
    """
    one = answer_one()
    return (one.order(), one.size())
</pre></div>
<div class="highlight">
<pre><span></span>print(answer_two())
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org4ce3346">
<h2 id="org4ce3346">Information Routes</h2>
<div class="outline-text-2" id="text-org4ce3346"></div>
<div class="outline-3" id="outline-container-orgd7e3c90">
<h3 id="orgd7e3c90">Part 1. Assume that information in this company can only be exchanged through email.</h3>
<div class="outline-text-3" id="text-orgd7e3c90">
<p>When an employee sends an email to another employee, a communication channel has been created, allowing the sender to provide information to the receiver, but not vice versa.</p>
<p>Based on the emails sent in the data, is it possible for information to go from every employee to every other employee?</p>
</div>
</div>
<div class="outline-3" id="outline-container-org3fbfc07">
<h3 id="org3fbfc07">Part 2. Now assume that a communication channel established by an email allows information to be exchanged both ways.</h3>
<div class="outline-text-3" id="text-org3fbfc07">
<p>Based on the emails sent in the data, is it possible for information to go from every employee to every other employee?</p>
<p><b>This function should return a tuple of bools (part1, part2).</b></p>
<div class="highlight">
<pre><span></span>def answer_three():
    """decides connectivity based on emails

    First: Assume communication is not necessarily allowed both ways - 
    based on data, can every employee contact each other?

    Second: Assume any contact means there's two way communication. 
    Can every employee be contacted?

    Returns:
     tuple: (every employee contacted every other employee, every employee contacted once)
    """
    emails = answer_one()
    nodes = emails.nodes()
    other_nodes = len(nodes) - 1
    fully_connected = all((len(emails.neighbors(node)) == other_nodes for node in nodes))
    undirected = emails.to_undirected()
    all_connected = True
    for left_node in nodes:
        for right_node in nodes:
            if left_node != right_node and not undirected.has_edge(left_node, right_node):
                all_connected = False
                break
        if not all_connected:
            break
    return fully_connected, all_connected
</pre></div>
<div class="highlight">
<pre><span></span>print(answer_three())
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org97990e6">
<h2 id="org97990e6">Largest Weakly Connected Component</h2>
<div class="outline-text-2" id="text-org97990e6">
<p>How many nodes are in the largest (in terms of nodes) weakly connected component?</p>
<p><b>This function should return an int.</b></p>
<div class="highlight">
<pre><span></span>def answer_four():
    """Count of nodes in the largest weakly connected component"""
    one = answer_one()
    return len(max(networkx.weakly_connected_component_subgraphs(one), key=len).nodes())
</pre></div>
<p>According to <a href="https://en.wikipedia.org/wiki/Connectivity_%28graph_theory%29#Definitions_of_components.2C_cuts_and_connectivity">Wikipedia</a>, a directed graph is weakly connected if replacing every directed edge with an undirected one creates a connected graph, so if the undirected graph in the next section is a connected graph, then the entire email graph is weakly connected.</p>
<div class="highlight">
<pre><span></span>print(answer_four())
undirected = one.to_undirected()
print(networkx.is_connected(undirected))
</pre></div>
<p>def answer<sub>five</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>six</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>seven</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>eight</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>nine</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>ten</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>eleven</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>twelve</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>thirteen</sub>():</p>
<p>return # Your Answer Here</p>
<p>def answer<sub>fourteen</sub>():</p>
<p>return # Your Answer Here</p>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="/categories/networks/" rel="tag">networks</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="/posts/networks/some-networkx-examples/" rel="prev" title="Some Networkx Examples">Previous post</a></li>
<li class="next"><a href="/posts/networks/friends-and-politics/" rel="next" title="Friends and Politics">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Contents © 2023 <a href="mailto:cloisteredmonkey.jmark@slmail.me">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
</div>
</div>
<script src="/assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script> 
</body>
</html>
