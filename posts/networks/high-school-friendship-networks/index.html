<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="A look at the High School Contact and Friendship Networks." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>High School Friendship Networks | Visions, Voices, Data</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../../rss.xml" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/high-school-friendship-networks/" rel="canonical"><!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]-->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script><!--
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"
</script>
-->
<script async src="../../../assets/javascript/p5.min.js" type="text/javascript"></script>
<meta content="Cloistered Monkey" name="author">
<link href="/posts/networks/network-datasets/" rel="prev" title="Network Datasets" type="text/html">
<link href="/posts/networks/high-school-facebook-networks/" rel="next" title="High School Facebook Networks" type="text/html">
<meta content="Visions, Voices, Data" property="og:site_name">
<meta content="High School Friendship Networks" property="og:title">
<meta content="https://necromuralist.github.io/Visions-Voices-Data/posts/networks/high-school-friendship-networks/" property="og:url">
<meta content="A look at the High School Contact and Friendship Networks." property="og:description">
<meta content="article" property="og:type">
<meta content="2019-03-24T17:38:17-07:00" property="article:published_time">
<meta content="exploration" property="article:tag">
<meta content="networks" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="https://necromuralist.github.io/Visions-Voices-Data/"><span id="blog-title">Visions, Voices, Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="/archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="/categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="/rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a> <a class="dropdown-item" href="/pages/giss/giss-yearly-anomalies-by-climate-zone">GISS Anomalies</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Visions-Voices-Data/"> <input name="k8" type="hidden" value="#444444"> <input name="k9" type="hidden" value="#D51920"> <input name="kt" type="hidden" value="h"> <input class="span2" maxlength="255" name="q" placeholder="Searchâ€¦" type="text"> <input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="/posts/networks/high-school-friendship-networks/index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="/posts/networks/high-school-friendship-networks/">High School Friendship Networks</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="/posts/networks/high-school-friendship-networks/" rel="bookmark"><time class="published dt-published" datetime="2019-03-24T17:38:17-07:00" itemprop="datePublished" title="2019-03-24 17:38">2019-03-24 17:38</time> <span class="updated">(updated <time class="updated dt-updated" datetime="2019-03-27T00:11:17-07:00" itemprop="dateUpdated" title="2019-03-27 00:11">2019-03-27 00:11</time>)</span></a></p>
<p class="sourceline"><a class="sourcelink" href="/posts/networks/high-school-friendship-networks/index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="/posts/networks/high-school-friendship-networks/#orgb13cd28">The Departure</a>
<ul>
<li><a href="/posts/networks/high-school-friendship-networks/#org9431853">Setup The Plotting</a></li>
</ul>
</li>
<li><a href="/posts/networks/high-school-friendship-networks/#org3171adc">The Initiation</a>
<ul>
<li><a href="/posts/networks/high-school-friendship-networks/#orga0dd745">Meta-Data</a></li>
<li><a href="/posts/networks/high-school-friendship-networks/#org72a4999">The Friendship Network</a></li>
<li><a href="/posts/networks/high-school-friendship-networks/#org69c5d35">Looking at the Friendship Network</a></li>
<li><a href="/posts/networks/high-school-friendship-networks/#orgec87e44">Plotting</a></li>
<li><a href="/posts/networks/high-school-friendship-networks/#orgfd25c03">Degree Distribution</a></li>
</ul>
</li>
<li><a href="/posts/networks/high-school-friendship-networks/#org9c1a4d3">The Return</a>
<ul>
<li><a href="/posts/networks/high-school-friendship-networks/#orgfd80b1d">Citations</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-orgb13cd28">
<h2 id="orgb13cd28">The Departure</h2>
<div class="outline-text-2" id="text-orgb13cd28">
<p>This looks at data provided by <a href="http://www.sociopatterns.org">SocioPatterns</a> that looks a the interactions between students at a High School in Marseilles, France, during the month of December in 2013. In particular, I'm going to look at the <i>Friendship Networks</i> data - wherein the students reported who they were friends with.</p>
</div>
<div class="outline-4" id="outline-container-org275a825">
<h4 id="org275a825">Imports</h4>
<div class="outline-text-4" id="text-org275a825"></div>
<div class="outline-5" id="outline-container-org34a3af3">
<h5 id="org34a3af3">From Python</h5>
<div class="outline-text-5" id="text-org34a3af3">
<div class="highlight">
<pre><span></span>from argparse import Namespace
from collections import Counter
from functools import partial
from pathlib import Path
import os
</pre></div>
</div>
</div>
<div class="outline-5" id="outline-container-orgaab2679">
<h5 id="orgaab2679">From PyPi</h5>
<div class="outline-text-5" id="text-orgaab2679">
<div class="highlight">
<pre><span></span>from bokeh.models import HoverTool, TapTool
from dotenv import load_dotenv
from holoviews import dim, opts
from holoviews.operation.datashader import bundle_graph
import holoviews
import hvplot.pandas
import networkx
import pandas as pandas
</pre></div>
</div>
</div>
<div class="outline-5" id="outline-container-org659a03b">
<h5 id="org659a03b">My Stuff</h5>
<div class="outline-text-5" id="text-org659a03b">
<div class="highlight">
<pre><span></span>from graeae.timers import Timer
from graeae.tables import CountPercentage
from graeae.visualization import EmbedHoloview
</pre></div>
</div>
</div>
</div>
<div class="outline-4" id="outline-container-orgec60eac">
<h4 id="orgec60eac">Load the Dotenv</h4>
<div class="outline-text-4" id="text-orgec60eac">
<div class="highlight">
<pre><span></span>load_dotenv(".env")
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org0f3dffb">
<h4 id="org0f3dffb">Build the Timer</h4>
<div class="outline-text-4" id="text-org0f3dffb">
<div class="highlight">
<pre><span></span>TIMER = Timer()
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org9431853">
<h3 id="org9431853">Setup The Plotting</h3>
<div class="outline-text-3" id="text-org9431853">
<div class="highlight">
<pre><span></span>holoviews.extension("bokeh")
SLUG = "high-school-friendship-networks/"
output = Path("../../files/posts/networks/" + SLUG)
Embed = partial(EmbedHoloview, folder_path=output)
</pre></div>
<div class="highlight">
<pre><span></span>Plot = Namespace(
    width = 1000,
    height = 800,
    graph_width = 800,
    graph_height = 800,
    fontsize = 18,
    edge_color = "LightSteelBlue",
    padding = dict(x=(-1.1, 1.1),
                   y=(-1.1, 1.1)),
)
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org3171adc">
<h2 id="org3171adc">The Initiation</h2>
<div class="outline-text-2" id="text-org3171adc"></div>
<div class="outline-3" id="outline-container-orga0dd745">
<h3 id="orga0dd745">Meta-Data</h3>
<div class="outline-text-3" id="text-orga0dd745">
<p>Let's take a look at the meta-data before loading it into pandas.</p>
<div class="highlight">
<pre><span></span>HIGH_SCHOOL = Path(os.environ.get("HIGH_SCHOOL")).expanduser()
assert HIGH_SCHOOL.is_dir()

#+begin_src ipython :session highschool :results none
class Files:
    metadata = "metadata_2013.txt"
    contact_diaries = "Contact-diaries-network_data_2013.csv"
    facebook = "Facebook-known-pairs_data_2013.csv"
    friendship = "Friendship-network_data_2013.csv"
    high_school = "High-School_data_2013.csv"
</pre></div>
<div class="highlight">
<pre><span></span>metadata_path = HIGH_SCHOOL.joinpath(Files.metadata)
assert metadata_path.is_file()
with metadata_path.open() as reader:
    for line in range(5):
        print(reader.readline(), end="")
</pre></div>
<pre class="example">
650     2BIO1   F
498     2BIO1   F
627     2BIO1   F
857     2BIO1   F
487     2BIO1   F

</pre>
<p>This file has the meta-data for the students. The three columns are the student's ID, class, and gender. I don't know what <i>class</i> refers to here. From an American perspective this could mean a particular subject, e.g. <i>Biology 101</i>, or it could mean the number of years that the student has been in attendance, e.g. <i>Freshman</i>. The names suggest that they are subject related, but I don't know this for certain.</p>
<div class="highlight">
<pre><span></span>meta_data = pandas.read_csv(metadata_path, sep="\t", 
                            names=["id", "class", "gender"])
meta_data.loc[:, "class"] = meta_data["class"].astype("category")
meta_data.loc[:, "gender"] = meta_data.gender.astype("category")
</pre></div>
<div class="highlight">
<pre><span></span>print(len(meta_data))
print(len(meta_data.id.unique()))
</pre></div>
<pre class="example">
329
329

</pre>
<p>So there's one entry for each student, meaning the student's can't belong to more than one class.</p>
</div>
<div class="outline-4" id="outline-container-orgcdc509a">
<h4 id="orgcdc509a">Classes</h4>
<div class="outline-text-4" id="text-orgcdc509a">
<p>First a table of the counts.</p>
<div class="highlight">
<pre><span></span>table = CountPercentage(meta_data["class"]).holoviews_table.opts(
    width=Plot.width,
    height=256,
    fontsize=Plot.fontsize,
)
Embed(plot=table, file_name="class_table", height_in_pixels=270)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/class_table.html" height="270" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The fact that there are nine classes makes it seem like it's not likely they are 'classes' in the sense of freshman, sophomores, etc. At the same time, since each student only has one class, it doesn't seem like they are 'classes' in the sense of "Biology 101".</p>
<p>Now a bar-plot to look at how the classes are distributed.</p>
<div class="highlight">
<pre><span></span>grouped = meta_data.groupby(["class", "gender"]).agg(
    {"class": "count", "gender": "count"})
grouped.columns = ["class_count", "gender_count"]
grouped = grouped.reset_index()
</pre></div>
<div class="highlight">
<pre><span></span>grouped.loc[:, "class"]= grouped["class"].astype(str)
</pre></div>
<div class="highlight">
<pre><span></span>plot = grouped.hvplot.bar("class", "class_count", title="Class Counts by Gender", 
                          stacked=True,
                          by="gender", height=Plot.height, 
                          width=Plot.width,
                          ylabel="Count",
                          xlabel="Class",
                          tools=["hover"],
                          fontsize=Plot.fontsize).opts(xrotation=90)
Embed(plot=plot, file_name="gender_counts_stacked", height_in_pixels=Plot.height)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/gender_counts_stacked.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/gender_counts_stacked.html">Link to Plot</a></p>
<p>This is a look at the same thing except not stacked.</p>
<div class="highlight">
<pre><span></span>plot = grouped.hvplot.bar(title="Class Counts by Gender", x="class", 
                          y="class_count",
                          xlabel="Class",
                          ylabel="Count",
                          by="gender", height=Plot.height, width=Plot.width, 
                          tools=["hover"],
                          fontsize=Plot.fontsize).opts(xrotation=90)
Embed(plot=plot, file_name="gender_counts", height_in_pixels=Plot.height)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/gender_counts.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/gender_counts.html">Link to Plot</a></p>
<p>Strangely, the classes that start with <code>2BIO</code> are more female while the others are more male.</p>
</div>
</div>
<div class="outline-4" id="outline-container-org518e513">
<h4 id="org518e513">Gender</h4>
<div class="outline-text-4" id="text-org518e513">
<p>A stacked bar plot to get a sense of not just the distribution among genders but among classes.</p>
<div class="highlight">
<pre><span></span>plot = grouped.hvplot.bar(title="Gender Counts", x="gender", y="gender_count",
                          stacked=True,
                          by="class", 
                          xlabel="Count",
                          ylabel="Gender",
                          fontsize=Plot.fontsize,
                          width=Plot.width,
                          height=Plot.height).opts(
                              legend_position="top_right",
                              xrotation=90, 
                              xlabel="Gender and Class")
Embed(plot=plot, file_name="class_counts_stacked", height_in_pixels=Plot.height)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/class_counts_stacked.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/class_counts_stacked.html">Link to Plot</a></p>
<p>A non-stacked bar plot to get a better sense of how the genders fill the different classes.</p>
<div class="highlight">
<pre><span></span>plot = grouped.hvplot.bar(title="Gender Counts", x="gender", y="gender_count",
                          xlabel="Gender",
                          ylabel="Count",
                          by="class", 
                          height=Plot.height,
                          width=Plot.width,
                          fontsize=Plot.fontsize).opts(
                              xrotation=90, xlabel="Gender and Class")
Embed(plot=plot, file_name="class_counts", height_in_pixels=Plot.height)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/class_counts.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/class_counts.html">Link to Plot</a></p>
<p>It looks like there were a little more males than females, but not a whole lot more.</p>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org72a4999">
<h3 id="org72a4999">The Friendship Network</h3>
<div class="outline-text-3" id="text-org72a4999">
<p>This is a dataset that shows whether a student identified another student as their friend.</p>
<div class="highlight">
<pre><span></span>friendship_path = HIGH_SCHOOL.joinpath(Files.friendship)
assert friendship_path.is_file()
with friendship_path.open() as reader:
    for line in range(5):
        print(reader.readline(), end="")
</pre></div>
<pre class="example">
1 55
1 205
1 272
1 494
1 779

</pre>
<p>The first column is the person who reported who his or her friends were and the second column is the person that was identified as a friend.</p>
<div class="highlight">
<pre><span></span>friendship_data = pandas.read_csv(friendship_path, delimiter=" ", 
                                  names=["reporter", "friend"])
friendship_data = friendship_data.dropna()
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org69c5d35">
<h3 id="org69c5d35">Looking at the Friendship Network</h3>
<div class="outline-text-3" id="text-org69c5d35">
<div class="highlight">
<pre><span></span>with TIMER:
    friendship_graph = networkx.convert_matrix.from_pandas_edgelist(
        friendship_data, "reporter", "friend", 
        create_using=networkx.DiGraph)
</pre></div>
<pre class="example">
Started: 2019-04-29 12:04:26.556414
Ended: 2019-04-29 12:04:26.558285
Elapsed: 0:00:00.001871

</pre>
<div class="highlight">
<pre><span></span>genders = dict(zip(meta_data.id, meta_data.gender))
classes = dict(zip(meta_data.id, meta_data["class"]))
</pre></div>
<div class="highlight">
<pre><span></span>for node in friendship_graph.nodes:
    friendship_graph.nodes[node]["gender"] = genders[node]
    friendship_graph.nodes[node]["class"] = classes[node]
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgec87e44">
<h3 id="orgec87e44">Plotting</h3>
<div class="outline-text-3" id="text-orgec87e44"></div>
<div class="outline-4" id="outline-container-org16029c6">
<h4 id="org16029c6">Friendship Network Circular</h4>
<div class="outline-text-4" id="text-org16029c6"></div>
<div class="outline-5" id="outline-container-org9430dda">
<h5 id="org9430dda">By Gender</h5>
<div class="outline-text-5" id="text-org9430dda">
<div class="highlight">
<pre><span></span>hover = HoverTool(
    tooltips = [
        ("Student Number", "@index"),
        ("Gender", "@gender"),
        ("Class", "@class"),
    ],
)

plot = holoviews.Graph.from_networkx(friendship_graph,
                                     networkx.circular_layout).redim.range(**Plot.padding).options(
                                         node_color=dim("gender"), cmap="Set1",
                                         tools=[hover, TapTool()],
                                         fontsize=Plot.fontsize,
                                         width=Plot.graph_width,
                                         height=Plot.graph_height,
                                         edge_line_color=Plot.edge_color,
                                         title="Friendship Network by Gender",
                                         xaxis=None,
                                         yaxis=None,
                                         directed=True)
Embed(plot=plot, file_name="friendship_network_circular")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_circular.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>It's a little hard to see what's going on here, other than to note that you can see some people are more popular than others. The red nodes are male, the green nodes are female, and the blue is "unknown". Strangely, when I did the distributions earlier there were seven "unknown" but there's only one hereâ€¦</p>
<div class="highlight">
<pre><span></span>print(meta_data[meta_data.gender=="Unknown"])
</pre></div>
<pre class="example">
      id  class   gender
320   34     MP  Unknown
321   41     MP  Unknown
322  243     MP  Unknown
323  420     MP  Unknown
324   58    PC*  Unknown
325  209    PC*  Unknown
326  979  2BIO2  Unknown

</pre>
<p>There are seven id's, so there are really are seven unknowns, but for some reason the circle graph doesn't expose any other than the first (student 34). Maybe not all the students are in the data?</p>
<div class="highlight">
<pre><span></span>students = set(meta_data.id.unique())
reporters = set(friendship_data.reporter.unique())
print(f"Number of students in the meta-data: {len(students)}")
print(f"Number of students who reported who their friends were: {len(reporters)}")
</pre></div>
<pre class="example">
Number of students in the meta-data: 329
Number of students who reported who their friends were: 133

</pre>
<p>So, it looks like not everyone took part in the survey.</p>
<div class="highlight">
<pre><span></span>reported = set(friendship_data.friend.unique())
print(f"Students not in graph: {len(students - (reporters & reported))}")
</pre></div>
<pre class="example">
Students not in graph: 199

</pre>
<p>Okay, so not all the students are part of the study.</p>
</div>
</div>
<div class="outline-5" id="outline-container-org9dabfaa">
<h5 id="org9dabfaa">By Class</h5>
<div class="outline-text-5" id="text-org9dabfaa">
<div class="highlight">
<pre><span></span>hover = HoverTool(
    tooltips = [
         ("Gender", "@gender"),
         ("Class", "@class"),
    ],
)

plot = holoviews.Graph.from_networkx(friendship_graph,
                                     networkx.circular_layout).opts(
                                         node_color=dim("class"), cmap="Set1",
                                         tools=[hover],
                                         fontsize=Plot.fontsize,
                                         width=800,
                                         height=800,
                                         edge_line_color=Plot.edge_color,
                                         title="Friendship Network by Class",
                                         xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_circular_class")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_circular_class.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/friendship_network_circular_class.html">Link to Plot</a></p>
<p>Unfortunately there's a <a href="https://github.com/pyviz/holoviews/issues/3509">bug</a> in HoloViews so I can't show a legend with Graphs, but I suppose since I don't know what the classes are, that doesn't really mean anything here.</p>
</div>
</div>
</div>
<div class="outline-4" id="outline-container-orge7a3ce4">
<h4 id="orge7a3ce4">Spring Layout</h4>
<div class="outline-text-4" id="text-orge7a3ce4"></div>
<div class="outline-5" id="outline-container-orga8f3f1d">
<h5 id="orga8f3f1d">Class</h5>
<div class="outline-text-5" id="text-orga8f3f1d">
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout, ).opts(
    node_color=dim("class"), cmap="Set1",
    tools=["hover"],
    width=800,
    height=800,
    edge_line_color=Plot.edge_color,
    title="Friendship Network By Class",
    xaxis=None, yaxis=None, directed=True,
    legend_position="right"
).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_class_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_class_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/friendship_network_class_spring.html">Link to Plot</a></p>
<p>Unlike the circular plot, this plot shows that there are disconnected neighborhoods within the network and there seems to be a clustering by class.</p>
</div>
</div>
<div class="outline-5" id="outline-container-orga0784bb">
<h5 id="orga0784bb">Gender</h5>
<div class="outline-text-5" id="text-orga0784bb">
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout, ).opts(
                                         node_color=dim("gender"), cmap="Set1",
                                         tools=["hover"],
                                         width=800,
                                         height=800,
                                         edge_line_color=Plot.edge_color,
                                         title="Friendship Network By Gender",
                                         xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_gender_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_gender_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/friendship_network_gender_spring.html">Link to Plot</a></p>
<p>Interestingly, this view seems to show that there is also some clustering by gender.</p>
</div>
</div>
</div>
<div class="outline-4" id="outline-container-org3a5999c">
<h4 id="org3a5999c">Kawada Kamai Layout</h4>
<div class="outline-text-4" id="text-org3a5999c"></div>
<div class="outline-5" id="outline-container-org201d919">
<h5 id="org201d919">Class</h5>
<div class="outline-text-5" id="text-org201d919">
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout, ).opts(
    node_color=dim("class"), cmap="Set1",
    tools=["hover", TapTool()],
    width=Plot.graph_width,
    height=Plot.graph_height,
    edge_line_color=Plot.edge_color,
    title="Friendship Network By Class (Kamada-Kawai)",
    xaxis=None, yaxis=None, directed=True,
    legend_position="right"
).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_class_kawada_kamai", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_class_kawada_kamai.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/friendship_network_class_spring.html">Link to Plot</a></p>
<p>This has more space between the nodes so it's a little easier to see the groups. Strangely, there's no isolated neighborhoods the way there is with the spring layout.</p>
</div>
</div>
<div class="outline-5" id="outline-container-org669d49a">
<h5 id="org669d49a">Gender</h5>
<div class="outline-text-5" id="text-org669d49a">
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout, ).opts(
                                         node_color=dim("gender"), cmap="Set1",
                                         tools=["hover"],
                                         width=800,
                                         height=800,
                                         edge_line_color=Plot.edge_color,
                                         title="Friendship Network By Gender (Kamada Kawai)",
                                         xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_gender_kamada_kawai", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_gender_kamada_kawai.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><a href="/posts/networks/high-school-friendship-networks/friendship_network_gender_spring.html">Link to Plot</a></p>
</div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgfd25c03">
<h3 id="orgfd25c03">Degree Distribution</h3>
<div class="outline-text-3" id="text-orgfd25c03"></div>
<div class="outline-4" id="outline-container-org19bcc40">
<h4 id="org19bcc40">Total Degrees</h4>
<div class="outline-text-4" id="text-org19bcc40">
<div class="highlight">
<pre><span></span>degree_sequence = sorted((degree for node, degree in friendship_graph.degree()))
degree_counts = Counter(degree_sequence)
degrees, counts = zip(*degree_counts.items())
</pre></div>
<div class="highlight">
<pre><span></span>table = holoviews.Table({"Degrees": degrees, "Count": counts}, ["Degrees"], ["Count"])
plot = table.to.bars(kdims=["Degrees"], vdims=["Count"]).opts(
    width=Plot.width,
    height=Plot.height,
    fontsize=Plot.fontsize,
    title="Degree Distribution",
    tools=["hover"],
)
Embed(plot=plot, file_name="degree_distribution")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/degree_distribution.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The <i>Total Degrees</i> for a node is the number of edges attached to it (either coming in or going out).</p>
</div>
</div>
<div class="outline-4" id="outline-container-org5643557">
<h4 id="org5643557">In-Degree Distribution</h4>
<div class="outline-text-4" id="text-org5643557">
<div class="highlight">
<pre><span></span>in_degree_sequence = sorted((degree for node, degree in friendship_graph.in_degree))
in_degree_counts = Counter(in_degree_sequence)
in_degrees, in_counts = zip(*in_degree_counts.items())

in_data = pandas.DataFrame.from_dict({"Degrees": in_degrees, "Count": in_counts})
in_data["Direction"] = "in"

plot = in_data.hvplot.bar(x="Degrees", y="Count").opts(
    width=Plot.width,
    height=Plot.height,
    fontsize=Plot.fontsize,
    title="In-Degree Distribution",
    tools=["hover"],
)
Embed(plot=plot, file_name="in_degree_distribution")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/in_degree_distribution.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The in-degree represents the number of times a student (the node) was identified by someone else as a friend. Three people weren't identified as friends at all and the most common count was 2, although someone was identified 15 times.</p>
</div>
</div>
<div class="outline-4" id="outline-container-orgfd08408">
<h4 id="orgfd08408">Out-Degree Distribution</h4>
<div class="outline-text-4" id="text-orgfd08408">
<div class="highlight">
<pre><span></span>out_degree_sequence = sorted((degree for node, degree in friendship_graph.out_degree))
out_degree_counts = Counter(out_degree_sequence)
out_degrees, out_counts = zip(*out_degree_counts.items())

out_data = pandas.DataFrame.from_dict({"Degrees": out_degrees, "Count": out_counts})
out_data["Direction"] = "out"
# table = holoviews.Table(, ["Degrees"], ["Count"])
plot = out_data.hvplot.bar(x="Degrees", y="Count").opts(
    width=Plot.width,
    height=Plot.height,
    fontsize=Plot.fontsize,
    title="Out-Degree Distribution",
    tools=["hover"],
)
Embed(plot=plot, file_name="out_degree_distribution")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/out_degree_distribution.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The out-degree is the number of other students a student identified as a friend.</p>
</div>
</div>
<div class="outline-4" id="outline-container-org683d85c">
<h4 id="org683d85c">In and Out Degrees</h4>
<div class="outline-text-4" id="text-org683d85c">
<div class="highlight">
<pre><span></span>in_out = pandas.concat([in_data, 
                        out_data]).sort_values(by="Degrees")
plot = in_out.hvplot.bar(x="Degrees", y="Count", by="Direction").opts(
    width=Plot.width,
    height=Plot.height,
    fontsize=Plot.fontsize,
    title="In and Out-Degree Distribution",
    tools=["hover"],
)
Embed(plot=plot, file_name="in_and_out_degree_distribution")()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/in_and_out_degree_distribution.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>Despite the fact that I sorted the data by degrees, the actual plot seems to have also sort it by degrees but treating them as strings instead of integers. I'm going to add the in-degree, out-degree and in-degree - out-degree (in minus out) as data for the nodes so that they'll be available in the plots.</p>
<div class="highlight">
<pre><span></span>for node in friendship_graph.nodes:
    friendship_graph.nodes[node]["In-Degree"] = friendship_graph.in_degree[node]
    friendship_graph.nodes[node]["Out-Degree"] = friendship_graph.out_degree[node]
    friendship_graph.nodes[node]["In-Out"] = friendship_graph.in_degree[node] - friendship_graph.out_degree[node]
</pre></div>
<p>Bokeh seemed to indicate that you could set the thickness of the edges using weights, but this doesn't seem to work, HoloViews appears to have changed something and I couldn't figure out how to make it work.</p>
<div class="highlight">
<pre><span></span>for start, end in friendship_graph.edges:
    friendship_graph[start][end]["in_weight"] = friendship_graph.in_degree[end]
    friendship_graph[start][end]["out_weight"] = friendship_graph.out_degree[start]
    friendship_graph[start][end]["weight"] = friendship_graph.in_degree[end]
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-orgecbe51c">
<h4 id="orgecbe51c">Popularity</h4>
<div class="outline-text-4" id="text-orgecbe51c">
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout)
plot = plot.opts(
    node_color=dim("In-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="In-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In-Degree",
    xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_in_degree_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_degree_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The color of the nodes is related to the number of in-degrees it has (which represents the number of other students that stated a node was their friend). If it is dark purple then there are fewer in-degrees. If it is yellow than there are many in-degrees. So the yellow nodes are popular and the dark purple nodes not so much.</p>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout))
plot = plot.opts(
    node_color=dim("In-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="In-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In-Degree",
    xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_in_degree_bundled_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_degree_bundled_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.circular_layout)
plot = plot.opts(
    node_color=dim("In-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="In-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In-Degree",
    xaxis=None, yaxis=None, directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_in_degree_circular", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_degree_circular.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.circular_layout))
plot = plot.opts(
    node_color=dim("In-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="In-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In-Degree",
    directed=True).redim.range(**Plot.padding)
Embed(plot=plot, file_name="friendship_network_in_degree_bundled_circular", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_degree_bundled_circular.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout))
plot = plot.opts(
    node_color=dim("In-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="In-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In-Degree (Kamada-Kawai)",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_in_degree_bundled_kamada_kawai", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_degree_bundled_kamada_kawai.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object></div>
</div>
<div class="outline-4" id="outline-container-org6374e41">
<h4 id="org6374e41">Gregariousness</h4>
<div class="outline-text-4" id="text-org6374e41">
<p>The out-degree is the number of times a student identified other students as friends. I'll interpret this as gregariousness (or maybe neediness).</p>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout)
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The color of the nodes is related to the number of out-degrees it has (which represents the number of students that a stated node identified as their friend). If it is dark purple than there are fewer out-degrees (loners?). If it is yellow than there are many out-degrees (the consider many to be their friends).</p>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout))
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_bundled_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_bundled_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.circular_layout)
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_alpha=0.25,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_circular", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_circular.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.circular_layout))
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_bundled_circular", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_bundled_circular.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = bundle_graph(holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout))
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree (Kamada-Kawai)",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_bundled_kamada_kawai", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_bundled_kamada_kawai.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout)
plot = plot.opts(
    node_color=dim("Out-Degree"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network Out-Degree (Kamada-Kawai)",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_out_degree_unbundled_kamada_kawai", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_out_degree_unbundled_kamada_kawai.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object></div>
</div>
<div class="outline-4" id="outline-container-org30a5084">
<h4 id="org30a5084">Perception</h4>
<div class="outline-text-4" id="text-org30a5084">
<p>The <i>In Degree - Out Degree</i> tells us how a student's perception of how many friends she has compares to how many people really think she's their friend. If it's negative than she thinks she has more friends than she has (delusional? optimistic?) and if it's positive than she has more friends than she thinks she does (modest? low self-esteem?).</p>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.spring_layout)
plot = plot.opts(
    node_color=dim("In-Out"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In Degree - Out Degree",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_in_minus_out_spring", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_minus_out_spring.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The dark-purple nodes have the most out-degrees compared to their in-degrees and the yellow-nodes have the most in-degrees compared to out-degrees.</p>
<div class="highlight">
<pre><span></span>plot = holoviews.Graph.from_networkx(friendship_graph, networkx.kamada_kawai_layout)
plot = plot.opts(
    node_color=dim("In-Out"), cmap="Plasma",
    tools=["hover"],
    width=800,
    height=800,
    edge_color_index="Out-Degree",
    edge_cmap="Spectral",
    title="Friendship Network In Minus Out (Kamada-Kawai)",
    xaxis=None, yaxis=None, directed=True)
Embed(plot=plot, file_name="friendship_network_in_minus_out_kamada_kawac", height_in_pixels=810)()
</pre></div>
<object data="/posts/networks/high-school-friendship-networks/friendship_network_in_minus_out_kamada_kawac.html" height="810" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org9c1a4d3">
<h2 id="org9c1a4d3">The Return</h2>
<div class="outline-text-2" id="text-org9c1a4d3"></div>
<div class="outline-3" id="outline-container-orgfd80b1d">
<h3 id="orgfd80b1d">Citations</h3>
<div class="outline-text-3" id="text-orgfd80b1d">
<ul class="org-ul">
<li>R. Mastrandrea, J. Fournet, A. Barrat,</li>
</ul>
<p>Contact patterns in a high school: a comparison between data collected using wearable sensors, contact diaries and friendship surveys. PLoS ONE 10(9): e0136497 (2015)</p>
</div>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="/categories/exploration/" rel="tag">exploration</a></li>
<li><a class="tag p-category" href="/categories/networks/" rel="tag">networks</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="/posts/networks/network-datasets/" rel="prev" title="Network Datasets">Previous post</a></li>
<li class="next"><a href="/posts/networks/high-school-facebook-networks/" rel="next" title="High School Facebook Networks">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Contents Â© 2019 <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
</div>
</div>
<script src="/assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script> 
</body>
</html>
